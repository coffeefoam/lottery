!function(e){function t(){}function n(e){le.console&&avalon.config.debug&&console.log($e?e:e+"")}function r(e,t){"string"==typeof e&&(e=e.match(fe)||[]);for(var n={},a=void 0!==t?t:1,r=0,i=e.length;r<i;r++)n[e[r]]=a;return n}function i(){return"avalon"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function o(e){return ve.test(ge.call(e))}function l(e,t){return e=Math.floor(e)||0,0>e?Math.max(t+e,0):Math.min(e,t)}function s(e,t,a){if(Array.isArray(e)){var r=e.concat();return e.length=0,e=X(e),e.push.apply(e,r),e}if("number"==typeof e.nodeType)return e;var o={};t=t||{};var l={},s={},r=[],u=a||{},f=e.$skipArray;a=0;for(var p;p=Ne[a++];)"string"!=typeof p&&n("warning:$skipArray["+p+"] must be a string"),delete e[p],s[p]=!0;if(Array.isArray(f))for(a=0;p=f[a++];)s[p]=!0;for(a in e)c(a,e[a],t,s,l,r,u);o=Pe(o,_e(l),s);for(p in s)o[p]=s[p];u.vmodel=o,o.$model=t,o.$events={},o.$id=i(),o.$accessors=l,o[oe]=[];for(a in Tt)e=Tt[a],$e||(e=e.bind(o)),o[a]=e;o.hasOwnProperty=function(e){return e in o.$model};for(a=0;e=r[a++];)xe[ie]=e,e(),T(e),delete xe[ie];return o}function c(e,t,n,a,r,i,o){if(n[e]=t,a[e]||t&&t.nodeType||"$"===e.charAt(0)&&!o[e])return a[e]=t;var l=avalon.type(t);if("function"===l)return a[e]=t;var c,f;if("object"===l&&"function"==typeof t.get&&2>=Object.keys(t).length){var p=t.set,d=t.get;c=function(t){var a=o.vmodel,r=n[e];if(!arguments.length)return avalon.openComputedCollect&&T(c),t=n[e]=d.call(a),Ae(r,t)||(f=void 0,a.$events&&Tt.$fire.call(a,e,t,r)),t;if(!ue){if("function"==typeof p){var i=a.$events[e];a.$events[e]=[],p.call(a,t),a.$events[e]=i}Ae(f,t)||(f=t,t=n[e]=d.call(a),Se&&(i=ke[a.$id])&&i[e]&&(i[e].$val=t),w(c),a.$events&&Tt.$fire.call(a,e,t,r))}},i.push(c)}else de.test(l)?(c=function(t){var a=c.$vmodel,r=a.$model;if(!arguments.length)return T(a),a;if(!ue&&!Ae(r,t)){t=c.$vmodel=u(a,t,l);var i=Le[t.$id];i&&i(),i=o.vmodel,n[e]=t.$model,w(a),i.$events&&Tt.$fire.call(i,e,n[e],r)}},c.$vmodel=t.$model?t:s(t,t),n[e]=c.$vmodel.$model):(c=function(t){var a=n[e];if(!arguments.length)return T(c),a;if(!Ae(a,t)){n[e]=t;var r=o.vmodel;if(Se){var i=ke[r.$id];i&&i[e]&&(i[e].$val=t)}w(c),r.$events&&Tt.$fire.call(r,e,t,a)}},n[e]=t);c[oe]=[],r[e]=c}function u(e,t,n){if("array"===n)return Array.isArray(t)?(t=t.concat(),e.clear(),e.push.apply(e,t),e):e;var a=e[oe]||[];ke[e.$id]&&(Se--,delete ke[e.$id]);var r=s(t);return Le[r.$id]=function(e){for(;e=a.shift();)(function(e){e.type&&avalon.nextTick(function(){e.rollback&&e.rollback(),cn[e.type](e,e.vmodels)})})(e);delete Le[r.$id]},r}function f(e,t,n){return e="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n,Function("fn,scope",e)}function p(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1}function d(){return(new XMLSerializer).serializeToString(this)}function v(e,t){if(e&&e.childNodes)for(var n,a=e.childNodes,r=0;n=a[r++];)if(n.tagName){var i=document.createElementNS(We,n.tagName.toLowerCase());ye.forEach.call(n.attributes,function(e){i.setAttribute(e.name,e.value)}),v(n,i),t.appendChild(i)}}function h(e){for(var t in e)if(me.call(e,t)){var n=e[t];"function"==typeof h.plugins[t]?h.plugins[t](n):"object"==typeof h[t]?avalon.mix(h[t],n):h[t]=n}return this}function m(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function g(e){return 0>e.indexOf("-")&&0>e.indexOf("_")?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})}function y(e){return"classList"in e||(avalon.mix(e.classList={node:e},Ke),e.classList.toString=Ke.toString),e.classList}function b(e){try{e="true"===e||"false"!==e&&("null"===e?null:+e+""===e?+e:Qe.test(e)?avalon.parseJSON(e):e)}catch(t){}return e}function x(e,t){if(0>=e.offsetWidth){if(pt.test(rt["@:get"](e,"display"))){var n,a={node:e};for(n in ft)a[n]=e.style[n],e.style[n]=ft[n];t.push(a)}(a=e.parentNode)&&1==a.nodeType&&x(a,t)}}function $(t,a){xe[ie]=t,avalon.openComputedCollect=!0;var r=t.evaluator;if(r)if("duplex"===t.type)t.handler();else try{t.handler(r.apply(0,t.args),t.element,t)}catch(i){delete t.evaluator,3===t.nodeType&&(h.commentInterpolate?t.element.replaceChild(e.createComment(t.value),t.node):t.node.data=ze+t.value+Ue),n("warning:evaluator of ["+t.value+"] throws error!")}else t();avalon.openComputedCollect=!1,delete xe[ie]}function T(e){xe[ie]&&(e=e[oe])&&avalon.Array.ensure(e,xe[ie])}function w(e){var t=e[oe];if(t&&t.length)for(var a,r=be.call(arguments,1),i=t.length;a=t[--i];){var o,l=a.element;l&&!avalon.contains(rn,l)&&(o="number"==typeof l.sourceIndex?0===l.sourceIndex:!avalon.contains(Te,l)),o?(t.splice(i,1),n("debug: remove "+a.name)):"function"==typeof a?a.apply(0,r):a.getter?a.handler.apply(a,r):a.handler(a.evaluator.apply(0,a.args||[]),l,a)}}function E(e,t){var n=NaN,a=setInterval(function(){var r=e.innerHTML;r===n?(clearInterval(a),t()):n=r},Et)}function C(e,t,a){if(a=e.getAttribute(re+"skip"),!e.getAttributeNode)return n("warning "+e.tagName+" no getAttributeNode method");var r=e.getAttributeNode(re+"important"),i=e.getAttributeNode(re+"controller");if("string"!=typeof a){if(a=r||i){var o=Me[a.value];if(!o)return;t=a===r?[o]:[o].concat(t),e.removeAttribute(a.name),o.$events.element=e,avalon.bind(e,"dataavailable",function(t){"object"==typeof t.detail&&e!==t.target&&o.$fire.apply(o,t.detail)}),avalon(e).removeClass(a.name)}N(e,t)}}function O(e,t){for(var n=e.firstChild;n;){var a=n.nextSibling,r=n.nodeType;1===r?C(n,t):3===r&&qe.test(n.data)?M(n,t):h.commentInterpolate&&8===r&&!qe.test(n.nodeValue)&&M(n,t),n=a}}function M(t,n){var a=[];if(8===t.nodeType){var r=[],i={expr:!0,value:_(t.nodeValue,r)};r.length&&(i.filters=r),r=[i]}else r=k(t.data);if(r.length){for(var o=0;i=r[o++];){var l=e.createTextNode(i.value);if(i.expr){var s=i.filters,i={type:"text",node:l,nodeType:3,value:i.value,filters:s};s&&-1!==s.indexOf("html")&&(avalon.Array.remove(s,"html"),i.type="html",i.replaceNodes=[l],s.length||delete a.filters),a.push(i)}Ee.appendChild(l)}t.parentNode.replaceChild(Ee,t),a.length&&A(a,n)}}function N(e,t){for(var a,r,i=Lt?Lt(e):avalon.slice(e.attributes),o=[],l={},s=0;r=i[s++];)if(r.specified&&(a=r.name.match(Ct))){var c=a[1],u=a[2]||"",f=r.value;r=r.name,l[r]=f,Mt[c]?(u=c,c="on"):"enabled"===c&&(c="disabled",f="!("+f+")"),"checked"!==c&&"selected"!==c&&"disabled"!==c&&"readonly"!==c||(u=c,c="attr",e.removeAttribute(r),r="ms-attr-"+u,e.setAttribute(r,f),a=[r],l[r]=f),"function"==typeof cn[c]&&(f={type:c,param:u,element:e,name:a[0],value:f,priority:c in Ot?Ot[c]:10*c.charCodeAt(0)+(Number(u)||0)},"if"===c&&-1<u.indexOf("loop")&&(f.priority+=100),t.length&&(o.push(f),"widget"===c&&(e.msData=e.msData||l)))}switch(o.sort(function(e,t){return e.priority-t.priority}),l["ms-checked"]&&l["ms-duplex"]&&n("warning!一个元素上不能同时定义ms-checked与ms-duplex"),i=o[0]||{},i.type){case"if":case"repeat":case"widget":A([i],t);break;default:A(o,t),!wt[e.tagName]&&Ye.test(e.innerHTML.replace(It,"<").replace(Dt,">"))&&O(e,t)}if(e.patchRepeat){e.patchRepeat();try{e.patchRepeat="",e.removeAttribute("patchRepeat")}catch(p){}}}function A(e,t){for(var n,a=0;n=e[a++];)n.vmodels=t,cn[n.type](n,t),n.evaluator&&n.name&&n.element.removeAttribute(n.name);e.length=0}function _(e,t){return 0<e.indexOf("|")&&(e=e.replace(Pt,"U2hvcnRDaXJjdWl0"),e=e.replace(Ht,function(e,n,a){return t.push(n+(a||"")),""}),e=e.replace(Rt,"||")),e}function k(e){var t,n=[];t=0;for(var a;;){if(a=e.indexOf(ze,t),-1===a)break;if((t=e.slice(t,a))&&n.push({value:t,expr:!1}),t=a+ze.length,a=e.indexOf(Ue,t),-1===a)break;if(t=e.slice(t,a)){var r=[];t=_(t,r),n.push({value:t,expr:!0,filters:r.length?r:void 0})}t=a+Ue.length}return(t=e.slice(t))&&n.push({value:t,expr:!1}),n}function S(e,t,n,a){for(var r,i=[],o=" = "+n+".",l=e.length;r=e[--l];)t.hasOwnProperty&&t.hasOwnProperty(r)&&(i.push(r+o+r),"duplex"===a&&(e.get=n+"."+r),e.splice(l,1));return i}function L(e){var t={};return e.filter(function(e){if(!t[e.$id])return t[e.$id]=1,!0})}function H(e){function t(a,r){return n.push(a)>e&&delete t[n.shift()],t[a]=r}var n=[];return t}function P(e,a,r,i){var o=r.type,l="html"==o||"text"===o?r.filters:"",s=a.map(function(e){return e.$id.replace(Gt,"$1")})+e+o+l,c=zt(e).concat(),u=[],f=[],p=[],d="";a=L(a);for(var v=0,d=a.length;v<d;v++)if(c.length){var h="vm"+ie+"_"+v;f.push(h),p.push(a[v]),u.push.apply(u,S(c,a[v],h,i))}if(u.length||"duplex"!==i)if(l&&p.push(avalon.filters),r.args=p,a=Ut[s])r.evaluator=a;else{if((d=u.join(", "))&&(d="var "+d),l){for(e="\nvar ret"+ie+" = "+e,i=[],i.push(e,"\r\n"),v=0;o=r.filters[v++];)l=o.indexOf("("),-1!==l?(e=o.slice(l+1,o.lastIndexOf(")")).trim(),e=","+e,o=o.slice(0,l).trim()):e="",i.push(" if(filters",ie,".",o,"){\n\ttry{\nret",ie," = filters",ie,".",o,"(ret",ie,e,")\n\t}catch(e){} \n}\n");e=i.join(""),e+="\nreturn ret"+ie,f.push("filters"+ie)}else{if("duplex"===o){d="'use strict';\nreturn function(vvv){\n\t"+d+";\n\tif(!arguments.length){\n\t\treturn "+e+"\n\t}\n\t"+(qt.test(e)?e:c.get)+"= vvv;\n} ";try{a=Function.apply(t,f.concat(d)),r.evaluator=Ut(s,a)}catch(m){n("debug: parse error,"+m.message)}return}"on"===o?(e=e.replace("(",".call(this,"),"$event"===i&&f.push(i),e="\nreturn "+e+";",i=e.lastIndexOf("\nreturn"),v=e.slice(0,i),e=e.slice(i),e=v+"\nif(avalon.openComputedCollect) return ;"+e):e="\nreturn "+e+";"}try{a=Function.apply(t,f.concat("'use strict';\n"+d+e)),r.evaluator=Ut(s,a)}catch(g){n("debug: parse error,"+g.message)}finally{c=i=f=null}}}function R(e,t,n,a){if(Array.isArray(a)){var r=a.map(function(e){var n={};return e.expr?P(e.value,t,n)||n:e.value});n.evaluator=function(){for(var e,t="",n=0;e=r[n++];)t+="string"==typeof e?e:e.evaluator.apply(0,e.args);return t},n.args=[]}else P(e,t,n,a);n.evaluator&&(n.handler=ln[n.handlerName||n.type],n.evaluator.toString=function(){return n.type+" binding to eval("+e+")"},$(n))}function I(t,n){if(t=t.toLowerCase(),!Yt[t]){var a=e.createElement(t);Te.appendChild(a),n=$e?getComputedStyle(a,null).display:a.currentStyle.display,Te.removeChild(a),Yt[t]=n}return Yt[t]}function D(t,n,a){var r=e.createEvent("Events");r.initEvent(n,!0,!0),a&&(r.detail=a),t.dispatchEvent(r)}function j(){!this.disabled&&this.oldValue!==this.value&&($e?D(this,"input"):this.fireEvent("onchange"))}function B(){for(var e=dn.length-1;0<=e;e--){var t=dn[e];avalon.contains(Te,t)?t.onTree&&t.onTree():t.msRetain||(t.offTree&&t.offTree(),dn.splice(e,1))}dn.length||clearInterval(pn)}function F(e){1===dn.push(e)&&(pn=setInterval(B,30))}function V(e){mn.call(this,e),e!==this.oldValue&&D(this,"input")}function W(t){var n,a={};for(n in t)a[n]=t[n];return n=a.target=t.srcElement,0===t.type.indexOf("key")?a.which=null!=t.charCode?t.charCode:t.keyCode:/mouse|click/.test(t.type)&&(n=n.ownerDocument||e,n="BackCompat"===n.compatMode?n.body:n.documentElement,a.pageX=t.clientX+(n.scrollLeft>>0)-(n.clientLeft>>0),a.pageY=t.clientY+(n.scrollTop>>0)-(n.clientTop>>0)),a.timeStamp=new Date-0,a.originalEvent=t,a.preventDefault=function(){t.returnValue=!1},a.stopPropagation=function(){t.cancelBubble=!0},a}function X(e){var t=[];t.$id=i(),t[oe]=[],t.$model=e,t.$events={},t._=s({length:e.length}),t._.$watch("length",function(e,n){t.$fire("length",e,n)});for(var n in Tt)t[n]=Tt[n];return avalon.mix(t,xn),t}function z(e){for(var t,n=$n(e),a=0;t=n[a++];)"ms-if"==t.nodeValue&&Ce.appendChild(t.elem);for(;t=e.firstChild;)Ce.appendChild(t);Ce.innerHTML=""}function U(e){var t=nn(this.callbackElement,this.callbackName,this.vmodels);if(t){var n=this.parent;E(n,function(){t.apply(n,e)})}}function q(e){function t(e,n){for(var a,r=e.childNodes,i=0;a=r[i++];)1===a.nodeType&&(n.push(a),t(a,n));return n}return t(e,[])}function G(e){var t=e.cloneNode(!0);if(le.VBArray)for(var n=q(e),a=q(t),r=0;e=n[r];r++)if(1===e.nodeType){var i=e.nodeName,o=a[r];if("INPUT"===i&&/radio|checkbox/.test(e.type))o.defaultChecked=o.checked=e.checked,o.value!==e.value&&(o.value=e.value);else if("OBJECT"===i)o.parentNode&&(o.outerHTML=e.outerHTML);else if("OPTION"===i)o.defaultSelected=o.selected=e.defaultSelected;else if("INPUT"===i||"TEXTAREA"===i)o.defaultValue=e.defaultValue;else if(i.toLowerCase()===i&&e.scopeName&&""===e.outerText){var l={};e.outerHTML.replace(/\s*=\s*/g,"=").replace(/(\w+)="([^"]+)"/g,function(e,t,n){l[t]=n}).replace(/(\w+)='([^']+)'/g,function(e,t,n){l[t]=n}),o.outerHTML.replace(/\s*=\s*/g,"=").replace(/(\w+)="/g,function(e,t){delete l[t]}).replace(/(\w+)='/g,function(e,t){delete l[t]}),delete l.urn,delete l.implementation;for(var s in l)o.setAttribute(s,l[s]);Y(o)}}return t}function Y(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}function J(t,n,a,r){function i(){if(delete Me[l],t.group=1,!t.fastRepeat){for(t.group=s.childNodes.length,s.parentNode.removeChild(s);s.firstChild;)n.appendChild(s.firstChild);void 0!==i.node&&i.parent.insertBefore(n,i.node)}}var o=G(t.template),l=r.$id,s=o.firstChild;return t.fastRepeat||(s=e.createElement("msloop"),s.style.display="none",s.appendChild(o)),s.setAttribute("ms-controller",l),s.removeAttribute(t.callbackName),s.removeAttribute("data-with-sorted"),a.push(s),n.appendChild(s),r.$outer=t.$outer,Me[l]=r,s.patchRepeat=i}function Z(e,t,n){if(t.startRepeat){e=t.startRepeat,t=t.endRepeat,n+=1;for(var a=0;a<n;a++)if(e=e.nextSibling,e==t)return t;return e}return e.childNodes[t.group*n]||null}function K(e,t,n){for(t*=n||1,n=Ee;0<=--t;){var a=e.nextSibling;if(n.appendChild(e),e=a,!e)break}return n}function Q(e,t,n){return e=s({$key:e,$outer:n,$val:t},0,{$val:1,$key:1}),e.$id="$proxy$with"+Math.random(),e}function ee(e,t,n,a){var r,i=n.param||"el";e={$remove:function(){return n.getter().removeAt(r.$index)},$itemName:i,$index:e,$outer:n.$outer,$first:0===e,$last:e===a},e[i]=t,a=0;for(var o=wn.length;a<o;a++)if(r=wn[a],r.hasOwnProperty(i)){for(a in e)r[a]=e[a];return wn.splice(a,1),r}return de.test(avalon.type(t))&&(e.$skipArray=[i]),r=s(e,0,Tn),r.$id="$proxy$"+n.type+Math.random(),r}function te(e){var t=e.$accessors,n=e.$itemName;["$index","$last","$first"].forEach(function(e){t[e][oe].length=0}),e[n][oe]&&(e[n][oe].length=0),wn.unshift(e)>h.maxRepeatSize&&wn.pop()}function ne(){e.body&&(Ln["ready!"].state=2,Sn.checkDeps(),ne=t)}function ae(){try{Te.doScroll("left"),ne()}catch(e){setTimeout(ae)}}var re="ms-",ie=new Date-0,oe="$"+ie,le=this||(0,eval)("this"),se=le.require,ce=le.define,ue=!1,fe=/[^, ]+/g,pe=/\[native code\]/,de=/^(?:object|array)$/,ve=/^\[object (Window|DOMWindow|global)\]$/,he=Object.prototype,me=he.hasOwnProperty,ge=he.toString,ye=Array.prototype,be=ye.slice,xe={},$e=le.dispatchEvent,Te=e.documentElement,we=e.getElementsByTagName("head")[0],Ee=e.createDocumentFragment(),Ce=e.createElement("div"),Oe={};"Boolean Number String Function Array Date RegExp Object Error".replace(fe,function(e){Oe["[object "+e+"]"]=e.toLowerCase()}),avalon=function(e){return new avalon.init(e)},avalon.init=function(e){this[0]=this.element=e},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Oe[ge.call(e)]||"object":typeof e},avalon.isWindow=function(e){return!!e&&(e==e.document&&e.document!=e)},o(le)&&(avalon.isWindow=o),avalon.isPlainObject=function(e,t){if(!e||"object"!==avalon.type(e)||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!me.call(e,"constructor")&&!me.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}for(t in e);return void 0===t||me.call(e,t)},pe.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return!!e&&"object"==typeof e&&Object.getPrototypeOf(e)===he}),avalon.mix=avalon.fn.mix=function(){var e,t,n,a,r,i=arguments[0]||{},o=1,l=arguments.length,s=!1;for("boolean"==typeof i&&(s=i,i=arguments[1]||{},o++),"object"!=typeof i&&"function"!==avalon.type(i)&&(i={}),o===l&&(i=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)n=i[t],a=e[t],i!==a&&(s&&a&&(avalon.isPlainObject(a)||(r=Array.isArray(a)))?(r?(r=!1,n=n&&Array.isArray(n)?n:[]):n=n&&avalon.isPlainObject(n)?n:{},i[t]=avalon.mix(s,n,a)):void 0!==a&&(i[t]=a));return i},avalon.mix({rword:fe,subscribers:oe,version:1.3,ui:{},log:n,slice:$e?function(e,t,n){return be.call(e,t,n)}:function(e,t,n){var a=[],r=e.length;if(void 0===n&&(n=r),"number"==typeof n&&isFinite(n))for(t=l(t,r),n=l(n,r),r=t;r<n;++r)a[r-t]=e[r];return a},noop:t,error:function(e,t){throw new(t||Error)(e)},oneObject:r,range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);var a=-1;t=Math.max(0,Math.ceil((t-e)/n));for(var r=Array(t);++a<t;)r[a]=e,e+=n;return r},eventHooks:{},bind:function(e,t,n,a){var r=avalon.eventHooks[t];return"object"==typeof r&&(t=r.type,r.deel&&(n=r.deel(e,n))),r=$e?n:function(t){n.call(e,W(t))},$e?e.addEventListener(t,r,!!a):e.attachEvent("on"+t,r),r},unbind:function(e,n,a,r){var i=avalon.eventHooks[n];a=a||t,"object"==typeof i&&(n=i.type),$e?e.removeEventListener(n,a,!!r):e.detachEvent("on"+n,a)},css:function(e,t,n){e instanceof avalon&&(e=e[0]);var a=/[_-]/.test(t)?g(t):t;return t=avalon.cssName(a)||a,void 0===n||"boolean"==typeof n?(a=rt[a+":get"]||rt["@:get"],e=a(e,t),!0===n?parseFloat(e)||0:e):void(""===n?e.style[t]="":null==n||n!==n||(isFinite(n)&&!avalon.cssNumber[a]&&(n+="px"),(a=rt[a+":set"]||rt["@:set"])(e,t,n)))},each:function(e,t){if(e){var n,a=0;e:{if(e&&"object"==typeof e&&!avalon.isWindow(e)){var r=e.length;if(+r===r&&!(r%1)&&0<=r)try{n=!1!=={}.propertyIsEnumerable.call(e,"length")||(Array.isArray(e)||/^\s?function/.test(e.item||e.callee));break e}catch(i){n=!0;break e}}n=!1}if(n)for(n=e.length;a<n;a++)t(a,e[a]);else for(a in e)e.hasOwnProperty(a)&&t(a,e[a])}},getWidgetData:function(e,t){var n,a=avalon(e).data(),r={};for(n in a)0===n.indexOf(t)&&(r[n.replace(t,"").replace(/\w/,function(e){return e.toLowerCase()})]=a[n]);return r},Array:{ensure:function(e,t){return-1===e.indexOf(t)&&e.push(t),e},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return!!~n&&avalon.Array.removeAt(e,n)}}}),avalon.nextTick=le.setImmediate?setImmediate.bind(le):function(e){setTimeout(e,0)};var Me=avalon.vmodels={};avalon.define=function(e,a){Me[e]&&n("warning: "+e+" 已经存在于avalon.vmodels中");var r={$watch:t};return a(r),r=s(r),ue=!0,a(r),ue=!1,r.$id=e,Me[e]=r};var Ne=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray,$accessors,"+oe).match(fe),Ae=Object.is||function(e,t){return 0===e&&0===t?1/e===1/t:e!==e?t!==t:e===t},_e=$e?function(e){var t,n={};for(t in e)n[t]={get:e[t],set:e[t],enumerable:!0,configurable:!0};return n}:function(e){return e},ke={},Se=0,Le={},He=Object.defineProperty;try{He({},"_",{value:"x"});var Pe=Object.defineProperties}catch(Re){"__defineGetter__"in avalon&&(He=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},Pe=function(e,t){for(var n in t)t.hasOwnProperty(n)&&He(e,n,t[n]);return e})}if(!Pe&&le.VBArray){le.execScript('Function parseVB(code)\n\tExecuteGlobal(code)\nEnd Function\nDim VBClassBodies\nSet VBClassBodies=CreateObject("Scripting.Dictionary")\nFunction findOrDefineVBClass(name,body)\n\tDim found\n\tfound=""\n\tFor Each key in VBClassBodies\n\t\tIf body=VBClassBodies.Item(key) Then\n\t\t\tfound=key\n\t\t\tExit For\n\t\tEnd If\n\tnext\n\tIf found="" Then\n\t\tparseVB("Class " + name + body)\n\t\tVBClassBodies.Add name, body\n\t\tfound=name\n\tEnd If\n\tfindOrDefineVBClass=found\nEnd Function',"VBScript");var Ie=function(e,t,n){var a=e[t];if("function"==typeof a){if(3!==arguments.length)return a();a(n)}},Pe=function(e,t,n){var a="VBClass"+setTimeout("1"),r=[];r.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d, p)","\t\tSet [__data__] = d: set [__proxy__] = p","\t\tSet [__const__] = Me","\tEnd Function");for(e in n)r.push("\tPublic ["+e+"]");r.push("\tPublic [hasOwnProperty]");for(e in t)e in n||r.push("\tPublic Property Let ["+e+"](val"+ie+")",'\t\tCall [__proxy__]([__data__], "'+e+'", val'+ie+")","\tEnd Property","\tPublic Property Set ["+e+"](val"+ie+")",'\t\tCall [__proxy__]([__data__], "'+e+'", val'+ie+")","\tEnd Property","\tPublic Property Get ["+e+"]","\tOn Error Resume Next","\t\tSet["+e+'] = [__proxy__]([__data__],"'+e+'")',"\tIf Err.Number <> 0 Then","\t\t["+e+'] = [__proxy__]([__data__],"'+e+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property");return r.push("End Class"),e=r.join("\r\n"),e=le.findOrDefineVBClass(a,e),e==a&&le.parseVB(["Function "+a+"Factory(a, b)","\tDim o","\tSet o = (New "+a+")(a, b)","\tSet "+a+"Factory = o","End Function"].join("\r\n")),le[e+"Factory"](t,Ie)}}if(!"司徒正美".trim){var De=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(De,"")}}var je=!{toString:null}.propertyIsEnumerable("toString"),Be=function(){}.propertyIsEnumerable("prototype"),Fe="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),Ve=Fe.length;Object.keys||(Object.keys=function(e){var t=[],n=Be&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(n=0;n<e.length;++n)t.push(String(n));else for(var a in e)!(n&&"prototype"===a)&&me.call(e,a)&&t.push(String(a));if(je)for(n=(n=e.constructor)&&n.prototype===e,a=0;a<Ve;a++){var r=Fe[a];!(n&&"constructor"===r)&&me.call(e,r)&&t.push(r)}return t}),Array.isArray||(Array.isArray=function(e){return e&&"array"===avalon.type(e)}),t.bind||(Function.prototype.bind=function(e){if(2>arguments.length&&void 0===e)return this;var t=this,n=arguments;return function(){var a,r=[];for(a=1;a<n.length;a++)r.push(n[a]);for(a=0;a<arguments.length;a++)r.push(arguments[a]);return t.apply(e,r)}}),pe.test([].map)||avalon.mix(ye,{indexOf:function(e,t){var n=this.length,a=~~t;for(0>a&&(a+=n);a<n;a++)if(this[a]===e)return a;return-1},lastIndexOf:function(e,t){var n=this.length,a=null==t?n-1:t;for(0>a&&(a=Math.max(0,n+a));0<=a;a--)if(this[a]===e)return a;return-1},forEach:f("","_",""),filter:f("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:f("r=[],","r[i]=_","return r"),some:f("","if(_)return true","return false"),every:f("","if(!_)return false","return true")}),Te.contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))}),e.contains||(e.contains=function(e){return p(this,e)});var We="http://www.w3.org/2000/svg";if(le.SVGElement){var Xe=document.createElementNS(We,"svg");Xe.innerHTML='<Rect width="300" height="100"/>',Xe.firstChild&&"rect"===Xe.firstChild.tagName||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:d,set:function(e){var t=this.tagName.toLowerCase(),n=this.parentNode;e=avalon.parseHTML(e),"svg"===t?n.insertBefore(e,this):(t=document.createDocumentFragment(),v(e,t),n.insertBefore(t,this)),n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=RegExp("</"+this.nodeName+">$","i");return this.outerHTML.replace(RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),"").replace(e,"")},set:function(e){avalon.clearHTML(this),e=avalon.parseHTML(e),v(e,this)}}})}!Te.outerHTML&&le.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",d);var ze,Ue,qe,Ge,Ye,Je=/[-.*+?^${}()|[\]\/\\]/g,Ze={loader:function(e){le.define=e?Sn.define:ce,le.require=e?Sn:se},interpolate:function(e){if(ze=e[0],Ue=e[1],ze===Ue)throw new SyntaxError("openTag!==closeTag");if("<!--,-->"==e+"")h.commentInterpolate=!0;else{if(e=ze+"test"+Ue,Ce.innerHTML=e,Ce.innerHTML!==e&&0<=Ce.innerHTML.indexOf("&lt;"))throw new SyntaxError("此定界符不合法");Ce.innerHTML=""}e=(ze+"").replace(Je,"\\$&");var t=(Ue+"").replace(Je,"\\$&");qe=RegExp(e+"(.*?)"+t),Ge=RegExp(e+"(.*?)"+t,"g"),Ye=RegExp(e+".*?"+t+"|\\sms-")}};h.debug=!0,h.plugins=Ze,h.plugins.interpolate(["{{","}}"]),h.paths={},h.shim={},h.maxRepeatSize=100,avalon.config=h;var Ke={toString:function(){var e=this.node.className;return("string"==typeof e?e:e.baseVal).split(/\s+/).join(" ")},contains:function(e){return-1<(" "+this+" ").indexOf(" "+e+" ")},add:function(e){this.contains(e)||this._set(this+" "+e)},remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," ").trim())},_set:function(e){var t=this.node;"string"==typeof t.className?t.className=e:t.setAttribute("class",e)}};"add,remove".replace(fe,function(e){avalon.fn[e+"Class"]=function(t){var n=this[0];return t&&"string"==typeof t&&n&&1==n.nodeType&&t.replace(/\S+/,function(t){y(n)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&y(t).contains(e)},toggleClass:function(e,t){for(var n,a=0,r=e.split(/\s+/),i="boolean"==typeof t;n=r[a++];)this[(i?t:!this.hasClass(n))?"addClass":"removeClass"](n);return this},attr:function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},data:function(e,t){switch(e="data-"+m(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var n=this.attr(e);return b(n);case 0:var a={};return ye.forEach.call(this[0].attributes,function(t){t&&(e=t.name,e.indexOf("data-")||(e=g(e.slice(5)),a[e]=b(t.value)))}),a}},removeData:function(e){return e="data-"+m(e),this[0].removeAttribute(e),this},css:function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var a=avalon.css(this,e,t);return void 0!==a?a:this},position:function(){var e,t,n=this[0],a={top:0,left:0};if(n)return"fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(a=e.offset()),a.top+=avalon.css(e[0],"borderTopWidth",!0),a.left+=avalon.css(e[0],"borderLeftWidth",!0)),{top:t.top-a.top-avalon.css(n,"marginTop",!0),left:t.left-a.left-avalon.css(n,"marginLeft",!0)}},offsetParent:function(){for(var e=this[0].offsetParent||Te;e&&"HTML"!==e.tagName&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||Te)},bind:function(e,t,n){if(this[0])return avalon.bind(this[0],e,t,n)},unbind:function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this},val:function(e){var t=this[0];if(t&&1===t.nodeType){var n,a=0===arguments.length,r=a?":get":":set",i=vt;if(n=t.tagName.toLowerCase(),n="input"===n&&/checkbox|radio/.test(t.type)?"checked":n,r=i[n+r])var o=r(t,e);else{if(a)return(t.value||"").replace(/\r/g,"");t.value=e}}return a?o:this}});var Qe=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,et=/^[\],:{}\s]*$/,tt=/(?:^|:|,)(?:\s*\[)+/g,nt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=le.JSON?JSON.parse:function(e){if("string"==typeof e){if((e=e.trim())&&et.test(e.replace(nt,"@").replace(at,"]").replace(tt,"")))return new Function("return "+e)();avalon.error("Invalid JSON: "+e)}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var a=this[0]||{},r=a.window&&a.document?a:9===a.nodeType&&(a.defaultView||a.parentWindow),i="scrollTop"===e;return arguments.length?void(r?r.scrollTo(i?avalon(r).scrollLeft():n,i?n:avalon(r).scrollTop()):a[e]=n):r?t in r?r[t]:Te[e]:a[e]}});var rt=avalon.cssHooks={},it=["","-webkit-","-o-","-moz-","-ms-"],ot={"float":"cssFloat",background:"backgroundColor"};if(avalon.cssNumber=r("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(ot[e])return ot[e];t=t||Te.style;for(var a=0,r=it.length;a<r;a++)if(n=g(it[a]+e),n in t)return ot[e]=n;return null},rt["@:set"]=function(e,t,n){try{e.style[t]=n}catch(a){}},le.getComputedStyle)rt["@:get"]=function(e,t){if(!e||!e.style)throw Error("getComputedStyle要求传入一个节点 "+e);var n,a=getComputedStyle(e,null);return a&&(n="filter"===t?a.getPropertyValue(t):a[t],""===n&&(n=e.style[t])),n},rt["opacity:get"]=function(e){return e=rt["@:get"](e,"opacity"),""===e?"1":e};else{var lt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,st=/^(top|right|bottom|left)$/,ct=!!le.XDomainRequest,ut={thin:ct?"1px":"2px",medium:ct?"3px":"4px",thick:ct?"5px":"6px"};rt["@:get"]=function(e,t){var n=e.currentStyle,a=n[t];if(lt.test(a)&&!st.test(a)){var r=e.style,i=r.left,o=e.runtimeStyle.left;e.runtimeStyle.left=n.left,r.left="fontSize"===t?"1em":a||0,a=r.pixelLeft+"px",r.left=i,e.runtimeStyle.left=o}return"medium"===a&&(t=t.replace("Width","Style"),"none"===n[t]&&(a="0px")),""===a?"auto":ut[a]||a},rt["opacity:set"]=function(e,t,n){e.style.filter="alpha(opacity="+100*n+")",e.style.zoom=1},rt["opacity:get"]=function(e){return e=e.filters.alpha||e.filters["DXImageTransform.Microsoft.Alpha"],(e?e.opacity:100)/100+""}}"top,left".replace(fe,function(e){rt[e+":get"]=function(t){var n=rt["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var ft={position:"absolute",visibility:"hidden",display:"block"},pt=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(fe,function(e){var t=e.toLowerCase(),n="client"+e,a="scroll"+e,r="offset"+e;rt[t+":get"]=function(t,n,a){var r="content-box";switch("string"==typeof a&&(r=a),n="Width"===e?["Left","Right"]:["Top","Bottom"],r){case"content-box":return t["client"+e]-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0);case"padding-box":return t["client"+e];case"border-box":return t["offset"+e];case"margin-box":return t["offset"+e]+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0)}},rt[t+"&get"]=function(e){var n=[];x(e,n);for(var a,r=rt[t+":get"](e),i=0;a=n[i++];){e=a.node;for(var o in a)"string"==typeof a[o]&&(e.style[o]=a[o])}return r},avalon.fn[t]=function(i){var o=this[0];if(0===arguments.length){if(o.setTimeout)return o["inner"+e]||o.document.documentElement[n];if(9===o.nodeType){var l=o.documentElement;return Math.max(o.body[a],l[a],o.body[r],l[r],l[n])}return rt[t+"&get"](o)}return this.css(t,i)},avalon.fn["inner"+e]=function(){return rt[t+":get"](this[0],void 0,"padding-box")},avalon.fn["outer"+e]=function(e){return rt[t+":get"](this[0],void 0,!0===e?"margin-box":"border-box")}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,a=n.body,r=n.documentElement,n=n.defaultView||n.parentWindow;if(!avalon.contains(r,e))return t;"undefined"!=typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect());var e=r.clientTop||a.clientTop,i=r.clientLeft||a.clientLeft,o=Math.max(n.pageYOffset||0,r.scrollTop,a.scrollTop),a=Math.max(n.pageXOffset||0,r.scrollLeft,a.scrollLeft);return{top:t.top+o-e,left:t.left+a-i}};var dt=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,vt={"option:get":function(e){return e.hasAttribute?e.hasAttribute("value")?e.value:e.text.trim():dt.test(e.outerHTML)?e.value:e.text},"select:get":function(e,t){for(var n,a=e.options,r=e.selectedIndex,i=vt["option:get"],o="select-one"===e.type||0>r,l=o?null:[],s=o?r+1:a.length,c=0>r?s:o?r:0;c<s;c++)if(n=a[c],(n.selected||c===r)&&!n.disabled){if(t=i(n),o)return t;l.push(t)}return l},"select:set":function(e,t,n){t=[].concat(t);for(var a,r=vt["option:get"],i=0;a=e.options[i++];)(a.selected=0<=t.indexOf(r(a)))&&(n=!0);n||(e.selectedIndex=-1)}},ht=/<([\w:]+)/,mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gt=$e?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,yt=r("text/javascript","text/ecmascript","application/ecmascript","application/javascript","text/vbscript"),bt=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,xt={area:[1,"<map>"],param:[1,"<object>"],col:[2,"<table><tbody></tbody><colgroup>","</table>"],legend:[1,"<fieldset>"],option:[1,"<select multiple='multiple'>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],_default:$e?[0,""]:[1,"X<div>"]};xt.optgroup=xt.option,xt.tbody=xt.tfoot=xt.colgroup=xt.caption=xt.thead,xt.th=xt.td;var $t=e.createElement("script");avalon.parseHTML=function(e){"string"!=typeof e&&(e+=""),e=e.replace(mt,"<$1></$2>").trim();var t,n=(ht.exec(e)||["",""])[1].toLowerCase(),a=xt[n]||xt._default,n=Ee.cloneNode(!1),r=Ce;if($e||(e=e.replace(gt,"<br class=msNoScope>$1")),r.innerHTML=a[1]+e+(a[2]||""),e=r.getElementsByTagName("script"),e.length)for(var i,o=0;i=e[o++];)i.type&&!yt[i.type]||(t=$t.cloneNode(!1),ye.forEach.call(i.attributes,function(e){e&&e.specified&&(t[e.name]=e.value);
}),t.text=i.text,i.parentNode.replaceChild(t,i));for(o=a[0];o--;r=r.lastChild);if(!$e)for(e=r.getElementsByTagName("br"),o=0;i=e[o++];)i.className&&"msNoScope"===i.className&&i.parentNode.removeChild(i);for(;a=r.firstChild;)n.appendChild(a);return n},avalon.innerHTML=function(e,t){if(!$e&&!gt.test(t)&&!bt.test(t))try{return void(e.innerHTML=t)}catch(n){}var a=this.parseHTML(t);this.clearHTML(e).appendChild(a)},avalon.clearHTML=function(e){return z(e),e};var Tt={$watch:function(e,t){if("function"==typeof t){var n=this.$events[e];n?n.push(t):this.$events[e]=[t]}else this.$events=this.$watch.backup;return this},$unwatch:function(e,t){var n=arguments.length;if(0===n)this.$watch.backup=this.$events,this.$events={};else if(1===n)this.$events[e]=[];else for(var n=this.$events[e]||[],a=n.length;0>~--a;)if(n[a]===t)return n.splice(a,1);return this},$fire:function(e){var t=!1,n=!1;e.match(/^bubble!(\w+)$/)?t=e=RegExp.$1:e.match(/^capture!(\w+)$/)&&(n=e=RegExp.$1);for(var a,r=this.$events,i=r[e]||[],o=r.$all||[],l=be.call(arguments,1),s=0;a=i[s++];)a.apply(this,l);for(s=0;a=o[s++];)a.apply(this,arguments);if(r=r.element){var c=[e].concat(l);if(t)$e?D(r,"dataavailable",c):(s=document.createEventObject(),s.detail=c,r.fireEvent("ondataavailable",s));else if(n){t=[];for(s in avalon.vmodels)(n=avalon.vmodels[s])&&n.$events&&n.$events.element&&(l=n.$events.element,avalon.contains(r,l)&&r!=l&&t.push(n));t.forEach(function(e){e.$fire.apply(e,c)})}}}};avalon.scan=function(e,t){e=e||Te;var n=t?[].concat(t):[];C(e,n)};var wt=r("AREA,BASE,BASEFONT,BR,COL,COMMAND,EMBED,HR,IMG,INPUT,LINK,META,PARAM,SOURCE,TRACK,WBR,NOSCRIPT,SCRIPT,STYLE,TEXTAREA"),Et=$e?15:50,Ct=/ms-(\w+)-?(.*)/,Ot={"if":10,repeat:90,widget:110,each:1400,"with":1500,duplex:2e3,on:3e3},Mt=r("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scroll,submit");if(!"1"[0])var Nt=H(512),At=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,_t=/^['"]/,kt=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,St=/&amp;/g,Lt=function(e){if(e=e.outerHTML,"</"===e.slice(0,2)||!e.trim())return[];e=e.match(kt)[0];var t,n,a=[];if(Nt[e])return Nt[e];for(;t=At.exec(e);)(n=t[2])&&(n=(_t.test(n)?n.slice(1,-1):n).replace(St,"&")),t=t[1].toLowerCase(),t.match(Ct),a.push({name:t,specified:!0,value:n||""});return Nt(e,a)};var Ht=/\|\s*(\w+)\s*(\([^)]*\))?/g,Pt=/\|\|/g,Rt=/U2hvcnRDaXJjdWl0/g,It=/&lt;/g,Dt=/&gt;/g,jt=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,Bt=/[^\w$]+/g,Ft=RegExp(""+("\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"),"g"),Vt=/\b\d[^,]*/g,Wt=/^,+|,+$/g,Xt=H(512),zt=function(e){if(e=","+e.trim(),Xt[e])return Xt[e];for(var t=e.replace(jt,"").replace(Bt,",").replace(Ft,"").replace(Vt,"").replace(Wt,"").split(/^$|,+/),n=[],a={},r=0;r<t.length;++r){var i=t[r];a[i]||(a[i]=n.push(i))}return Xt(e,n)},Ut=H(256),qt=/\w\[.*\]|\w\.\w/,Gt=/(\$proxy\$[a-z]+)\d+$/;avalon.parseExprProxy=R;var Yt=r("a,abbr,b,span,strong,em,font,i,kbd","inline");avalon.mix(Yt,r("div,h1,h2,h3,h4,h5,h6,section,p","block")),avalon.parseDisplay=I;var Jt=function(e){return!$e||"table-cell"===getComputedStyle(e,null).display}(e.createElement("td")),Zt={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};"accessKey,allowTransparency,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan,contentEditable,dateTime,defaultChecked,defaultSelected,defaultValue,frameBorder,isMap,longDesc,maxLength,marginWidth,marginHeight,noHref,noResize,noShade,readOnly,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign".replace(fe,function(e){Zt[e.toLowerCase()]=e});var Kt=/\(([^)]*)\)/;we.insertBefore(avalon.parseHTML("<style id='avalonStyle'>.avalonHide{ display: none!important }</style>"),we.firstChild);var Qt=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,en=/<noscript.*?>([\s\S]+?)<\/noscript>/im,tn=function(){return new(le.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},nn=function(e,t,n){if(e=e.getAttribute(t)){t=0;for(var a;a=n[t++];)if(a.hasOwnProperty(e)&&"function"==typeof a[e])return a[e]}},an=avalon.templateCache={},rn=e.createElement("div");rn.innerHTML="a";try{rn.contains(rn.firstChild),avalon.contains=function(e,t){return e.contains(t)}}catch(on){avalon.contains=p}var ln=avalon.bindingExecutors={attr:function(t,n,a){var r=a.type,i=a.param;if("css"===r)avalon(n).css(i,t);else if("attr"===r)(a=!1===t||null===t||void 0===t)?n.removeAttribute(i):$e?a||n.setAttribute(i,t):(i=Zt[i]||i,a?n.removeAttribute(i):n[i]=t);else if("include"===r&&t){var o=a.vmodels,l=nn(n,"data-include-rendered",o),s=nn(n,"data-include-loaded",o),c=function(e){s&&(e=s.apply(n,[e].concat(o))),avalon.innerHTML(n,e),O(n,o),l&&E(n,function(){l.call(n)})};if("src"===a.param)if(an[t])c(an[t]);else{var u=tn();u.onreadystatechange=function(){if(4===u.readyState){var e=u.status;(200<=e&&300>e||304===e||1223===e)&&c(an[t]=u.responseText)}},u.open("GET",t,!0),"withCredentials"in u&&(u.withCredentials=!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(null)}else{var f=t&&1==t.nodeType?t:e.getElementById(t);if(f){if("NOSCRIPT"===f.tagName&&!f.innerHTML&&!f.fixIE78){u=tn(),u.open("GET",location,!1),u.send(null),i=e.getElementsByTagName("noscript"),a=(u.responseText||"").match(Qt)||[];for(var r=a.length,p=0;p<r;p++){var d=i[p];d&&(d.style.display="none",d.fixIE78=(a[p].match(en)||["","&nbsp;"])[1])}}avalon.nextTick(function(){c(f.fixIE78||f.value||f.innerText||f.innerHTML)})}}}else Te.hasAttribute||"string"!=typeof t||"src"!==r&&"href"!==r||(t=t.replace(/&amp;/g,"&")),n[r]=t},"class":function(e,t,n){var a=avalon(t),r=n.type;if("class"===r&&n.param)a.toggleClass(n.param,!!e);else{var i=!n._evaluator||!!n._evaluator.apply(t,n._args),o=n._class||e;switch(r){case"class":i&&n.oldClass&&a.removeClass(n.oldClass),a.toggleClass(o,i),n.oldClass=o;break;case"hover":case"active":n.init||("hover"===r?(e="mouseenter",t="mouseleave"):(t.tabIndex=t.tabIndex||-1,e="mousedown",t="mouseup",a.bind("mouseleave",function(){i&&a.removeClass(o)})),a.bind(e,function(){i&&a.addClass(o)}),a.bind(t,function(){i&&a.removeClass(o)}),n.init=1)}}},data:function(e,t,n){n="data-"+n.param,e&&"object"==typeof e?t[n]=e:t.setAttribute(n,String(e))},repeat:function(e,t,n){if(e){var a=this.group,r=this.startRepeat&&this.startRepeat.parentNode;r&&(this.parent=r);var r=this.parent,i=this.proxies,o=Ee.cloneNode(!1);if("del"===e||"move"===e)var l=Z(r,this,t);switch(e){case"add":for(var l=n,s=this.getter().length-1,a=[],c={},u=0,f=l.length;u<f;u++){var p=u+t,c=ee(p,l[u],this,s);i.splice(p,0,c),c=J(this,o,a,c)}for(l=Z(r,this,t),c.node=l,c.parent=r,r.insertBefore(o,l),u=0;r=a[u++];)C(r,this.vmodels);break;case"del":for(r=i.splice(t,n),u=0;c=r[u++];)te(c);z(K(l,a,n));break;case"index":for(s=i.length-1;n=i[t];t++)n.$index=t,n.$first=0===t,n.$last=t===s;break;case"clear":if(this.startRepeat)for(;(r=this.startRepeat.nextSibling)&&r!==this.endRepeat;)o.appendChild(r);else o=r;z(o),i.length=0;break;case"move":(o=i.splice(t,1)[0])&&(i.splice(n,0,o),o=K(l,a),l=Z(r,this,n),r.insertBefore(o,l));break;case"set":(c=i[t])&&(c[c.$itemName]=n);break;case"append":i=n,u=nn(this.callbackElement,"data-with-sorted",this.vmodels),l=[],a=[],c={};for(s in t)t.hasOwnProperty(s)&&"hasOwnProperty"!==s&&l.push(s);for(u&&(u=u.call(r,l))&&Array.isArray(u)&&u.length&&(l=u),u=0;s=l[u++];)"hasOwnProperty"!==s&&(c=J(this,o,a,i[s]));for(c.parent=r,c.node=this.endRepeat||null,r.insertBefore(o,c.node),u=0;n=a[u++];)C(n,this.vmodels)}U.call(this,arguments)}},html:function(e,t,n){if(e=null==e?"":e,t||(t=n.element=n.node.parentNode),n.replaceNodes){var a;if(11===e.nodeType)a=e;else if(1===e.nodeType||e.item)for(e=1===e.nodeType?e.childNodes:e.item?e:[],a=Ee.cloneNode(!0);e[0];)a.appendChild(e[0]);else a=avalon.parseHTML(e);e=avalon.slice(a.childNodes),t.insertBefore(a,n.replaceNodes[0]||null),a=0;for(var r;r=n.replaceNodes[a++];)t.removeChild(r);n.replaceNodes=e}else avalon.innerHTML(t,e);avalon.nextTick(function(){O(t,n.vmodels)})},"if":function(e,t,a){var r=a.placehoder;if(e){if(!a.msInDocument){a.msInDocument=!0;try{r.parentNode.replaceChild(t,r)}catch(i){n("debug: ms-if  "+i.message)}}Ye.test(t.outerHTML.replace(It,"<").replace(Dt,">"))&&N(t,a.vmodels)}else a.msInDocument&&(a.msInDocument=!1,t.parentNode.replaceChild(r,t),r.elem=t,rn.appendChild(t))},on:function(e,n,a){var r=a.evaluator,i=a.args,o=a.vmodels;if(e=a.hasArgs?function(e){return r.apply(this,i.concat(e))}:function(e){return r.apply(0,i).call(this,e)},n.$vmodel=o[0],n.$vmodels=o,a.param=a.param.replace(/-\d+$/,""),"function"==typeof a.specialBind)a.specialBind(n,e);else var l=avalon.bind(n,a.param,e);a.rollback=function(){"function"==typeof a.specialUnbind?a.specialUnbind():avalon.unbind(n,a.param,l)},a.evaluator=a.handler=t},text:function(e,t,n){e=null==e?"":e;var a=n.node;if(3===n.nodeType)try{a.data=e}catch(r){}else t||(t=n.element=a.parentNode),"textContent"in t?t.textContent=e:t.innerText=e},visible:function(e,t,n){t.style.display=e?n.display:"none"},widget:t},sn=/^\s+$/,cn=avalon.bindingHandlers={attr:function(e,t){var n=e.value.trim(),a=!0;-1<n.indexOf(ze)&&2<n.indexOf(Ue)&&(a=!1,qe.test(n)&&""===RegExp.rightContext&&""===RegExp.leftContext&&(a=!0,n=RegExp.$1)),e.handlerName="attr",R(n,t,e,a?null:k(e.value))},"class":function(e,t){var a=e.param,r=e.value;if(e.handlerName="class",!a||isFinite(a)){e.param="";var i=r.replace(Ge,function(e){return Math.pow(10,e.length-1)}).indexOf(":");if(-1===i)a=r;else{if(a=r.slice(0,i),r=r.slice(i+1),P(r,t,e),!e.evaluator)return n("debug: ms-class '"+(r||"").trim()+"' 不存在于VM中"),!1;e._evaluator=e.evaluator,e._args=e.args}r=qe.test(a),r||(e._class=a),R("",t,e,r?k(a):null)}else"class"===e.type&&R(r,t,e)},duplex:function(e,n){var a=e.element;if("function"==typeof fn[a.tagName]&&(e.changed=nn(a,"data-duplex-changed",n)||t,P(e.value,n,e,"duplex"),e.evaluator&&e.args)){var r=a.form;r&&r.msValidate&&r.msValidate(a),e.bound=function(t,n){a.addEventListener?a.addEventListener(t,n,!1):a.attachEvent("on"+t,n);var r=e.rollback;e.rollback=function(){avalon.unbind(a,t,n),r&&r()}},fn[a.tagName](a,e.evaluator.apply(null,e.args),e)}},repeat:function(t,a){var r,i=t.type;P(t.value,a,t),"repeat"!==i&&n("warning:建议使用ms-repeat代替ms-each, ms-with, ms-repeat只占用一个标签并且性能更好");var o=t.callbackElement=t.parent=t.element;t.getter=function(){return this.evaluator.apply(0,this.args||[])},t.proxies=[];var l=!0;try{r=t.getter();var s=avalon.type(r);"object"!=s&&"array"!=s||(l=!1)}catch(c){}if(s=Ee.cloneNode(!1),"repeat"===i){var u=e.createComment("ms-repeat-start"),f=e.createComment("ms-repeat-end");t.element=t.parent=o.parentNode,t.startRepeat=u,t.endRepeat=f,o.removeAttribute(t.name),t.parent.replaceChild(f,o),t.parent.insertBefore(u,f),s.appendChild(o)}else for(;u=o.firstChild;)3===u.nodeType&&sn.test(u.data)?o.removeChild(u):s.appendChild(u);if(t.template=s,t.rollback=function(){ln.repeat.call(t,"clear");var e=t.endRepeat,n=t.parent;n.insertBefore(t.template,e||null),e&&(n.removeChild(e),n.removeChild(t.startRepeat),t.element=t.callbackElement)},o=t.value.split(".")||[],1<o.length)for(o.pop(),u=o[0],o=0;f=a[o++];)if(f&&f.hasOwnProperty(u)&&f[u][oe]){f[u][oe].push(t);break}if(!l){for(t.callbackName="data-"+i+"-rendered",t.handler=ln.repeat,t.$outer={},l="$key",u="$val",Array.isArray(r)&&(l="$first",u="$last"),o=0;f=a[o++];)if(f.hasOwnProperty(l)&&f.hasOwnProperty(u)){t.$outer=f;break}if(u=s.firstChild,t.fastRepeat=!!u&&1===u.nodeType&&s.lastChild===u&&!u.attributes["ms-controller"]&&!u.attributes["ms-important"],r[oe]&&r[oe].push(t),Array.isArray(r)||"each"===i)t.handler("add",0,r);else{var p=ke[r.$id];if(!p){Se++;var d,p=ke[r.$id]={};for(d in r)r.hasOwnProperty(d)&&"hasOwnProperty"!==d&&function(e,t){p[e]=Q(e,t,{}),p[e].$watch("$val",function(t){r[e]=t})}(d,r[d])}t.handler("append",r,p)}}},html:function(e,t){R(e.value,t,e)},"if":function(t,n){t.element.removeAttribute(t.name),t.placehoder||(t.msInDocument=t.placehoder=e.createComment("ms-if")),t.vmodels=n,R(t.value,n,t)},on:function(e,t){var n=e.value,a="$event";if(0<n.indexOf("(")&&-1<n.indexOf(")")){var r=(n.match(Kt)||["",""])[1].trim();""!==r&&"$event"!==r||(a=void 0,n=n.replace(Kt,""))}else a=void 0;e.hasArgs=a,R(n,t,e,a)},visible:function(e,t){var n=e.element;if(!Jt&&!Te.contains(n))var a=I(n.tagName);a=a||avalon(n).css("display"),e.display="none"===a?I(n.tagName):a,R(e.value,t,e)},widget:function(e,n){var a=e.value.match(fe),r=e.element,i=a[0];"$"!==a[1]&&a[1]||(a[1]=i+setTimeout("1")),e.value=a.join(",");var o=avalon.ui[i];if("function"==typeof o){n=r.vmodels||n;for(var l,s=a[2]||i,c=0;l=n[c++];)if(l.hasOwnProperty(s)&&"object"==typeof l[s]){var u=l;break}if(u){var f=u[s],f=f.$model||f,s=f[i+"Id"];"string"==typeof s&&(a[1]=s)}s=avalon.getWidgetData(r,a[0]),e[i+"Id"]=a[1],e[i+"Options"]=avalon.mix({},o.defaults,f||{},s),r.removeAttribute("ms-widget");var p=o(r,e,n)||{};if(e.evaluator=t,r.msData["ms-widget-id"]=p.$id||"",p.hasOwnProperty("$init")&&p.$init(),p.hasOwnProperty("$remove")){var d=function(){p.$remove(),r.msData={},delete Me[p.$id]};un?r.addEventListener("DOMNodeRemoved",function(e){e.target===this&&!this.msRetain&&(le.chrome?"INPUT"===this.tagName&&1===e.relatedNode.nodeType:1)&&d()}):(r.offTree=d,F(r))}}else n.length&&(r.vmodels=n)}},un=$e&&e.implementation.hasFeature("MutationEvents","2.0");"hover,active".replace(fe,function(e){cn[e]=cn["class"]}),"with,each".replace(fe,function(e){cn[e]=cn.repeat}),cn.data=cn.text=cn.html,"title,alt,src,value,css,include,href".replace(fe,function(e){cn[e]=cn.attr});var fn=cn.duplex;fn.INPUT=function(t,n,a){var r=a.param,i=t.type,o=a.bound,l=avalon(t),s=!1,c=!1,u=function(e){s=!0,a.changed.call(this,e)},f=function(){c=!0},p=function(){c=!1},d=function(){if(!c){var e=t.oldValue=t.value;!1!==l.data("duplex-observe")&&(n(e),u.call(t,e))}};if(a.handler=function(){var e=n();e!==t.value&&(t.value=e+"")},"checkbox"===i&&"radio"===r&&(i="radio"),"radio"===i)a.handler=function(){t.defaultChecked=t.checked=/bool|text/.test(r)?n()+""===t.value:!!n()},d=function(){if(!1!==l.data("duplex-observe")){var e=t.value;"text"===r?n(e):"bool"===r?(e="true"===e,n(e)):(e=!t.defaultChecked,n(e),t.checked=e),u.call(t,e)}},o(r?"click":"mousedown",d);else if("checkbox"===i)d=function(){if(!1!==l.data("duplex-observe")){var e=t.checked?"ensure":"remove",a=n();Array.isArray(a)?avalon.Array[e](a,t.value):avalon.error("ms-duplex位于checkbox时要求对应一个数组"),u.call(t,a)}},a.handler=function(){var e=[].concat(n());t.checked=0<=e.indexOf(t.value)},o($e?"change":"click",d);else if(i=t.attributes["data-duplex-event"]||t.attributes["data-event"]||{},i=i.value,"change"===i)o("change",d);else if($e&&9!==e.documentMode)o("input",d),o("compositionstart",f),o("compositionend",p);else{var v=["keyup","paste","cut","change"],h=function(e){var t=e.keyCode;91===t||15<t&&19>t||37<=t&&40>=t||("cut"===e.type?avalon.nextTick(d):d())};v.forEach(function(e){t.attachEvent("on"+e,h)}),a.rollback=function(){v.forEach(function(e){t.detachEvent("on"+e,h)})}}t.onTree=j,vn(t),t.oldValue=t.value,$(a);var m=setTimeout(function(){s||u.call(t,t.value),clearTimeout(m)},31)};var pn,dn=[],vn=t;try{var hn=HTMLInputElement.prototype;Object.getOwnPropertyNames(hn);var mn=Object.getOwnPropertyDescriptor(hn,"value").set;Object.defineProperty(hn,"value",{set:V})}catch(gn){vn=F}fn.SELECT=function(e,t,n){var a=avalon(e);n.handler=function(){var n=t(),n=n&&n.$model||n,n=Array.isArray(n)?n.map(String):n+"";n+""!==e.oldValue&&(a.val(n),e.oldValue=n+"")},n.bound("change",function(){if(!1!==a.data("duplex-observe")){var r=a.val();r+""!==e.oldValue&&(t(r),e.oldValue=r+""),n.changed.call(e,r)}});var r=NaN,i=setInterval(function(){var a=e.innerHTML;a===r?(clearInterval(i),$(n),n.changed.call(e,t())):r=a},20)},fn.TEXTAREA=fn.INPUT;var yn=avalon.eventHooks;"onmouseenter"in Te||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){yn[e]={type:t,deel:function(t,n){return function(a){var r=a.relatedTarget;if(!r||r!==t&&!(16&t.compareDocumentPosition(r)))return delete a.type,a.type=e,n.call(t,a)}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){le[e]&&!yn.animationend&&(yn.animationend={type:t})}),"oninput"in document.createElement("input")||(yn.input={type:"propertychange",deel:function(e,t){return function(n){if("value"===n.propertyName)return n.type="input",t.call(e,n)}}}),void 0===document.onmousewheel&&(yn.mousewheel={type:"DOMMouseScroll",deel:function(e,t){return function(n){n.wheelDelta=0<n.detail?-120:120,Object.defineProperty&&Object.defineProperty(n,"type",{value:"mousewheel"}),t.call(e,n)}}});var bn=ye.splice,xn={_splice:bn,_add:function(e,t){var n=this.length;t="number"==typeof t?t:n;for(var n=[],a=0,r=e.length;a<r;a++){var i=n,o=a,l=e[a];de.test(avalon.type(l))&&(l=l.$id?l:s(l,l)),i[o]=l}if(bn.apply(this,[t,0].concat(n)),w(this,"add",t,n),!this._stopFireLength)return this._.length=this.length},_del:function(e,t){var n=this._splice(e,t);return n.length&&(w(this,"del",e,t),this._stopFireLength||(this._.length=this.length)),n},push:function(){ye.push.apply(this.$model,arguments);var e=this._add(arguments);return w(this,"index",2<e?e-2:0),e},pushArray:function(e){return this.push.apply(this,e)},unshift:function(){return ye.unshift.apply(this.$model,arguments),this._add(arguments,0),w(this,"index",arguments.length),this.$model.length},shift:function(){var e=this.$model.shift();return this._del(0,1),w(this,"index",0),e},pop:function(){var e=this.$model.pop();return this._del(this.length-1,1),e},splice:function(e,t){e=l(e,this.length);var n,a=bn.apply(this.$model,arguments),r=[];return this._stopFireLength=!0,a.length&&(r=this._del(e,a.length),n=!0),2<arguments.length&&(this._add(be.call(arguments,2),e),n=!0),this._stopFireLength=!1,this._.length=this.length,n&&w(this,"index",0),r},contains:function(e){return-1!==this.indexOf(e)},size:function(){return this._.length},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return 0<=e?this.splice(e,1):[]},clear:function(){return this.$model.length=this.length=this._.length=0,w(this,"clear",0),this},removeAll:function(e){if(Array.isArray(e))e.forEach(function(e){this.remove(e)},this);else if("function"==typeof e)for(var t=this.length-1;0<=t;t--)e(this[t],t)&&this.splice(t,1);else this.clear()},ensure:function(e){return this.contains(e)||this.push(e),this},set:function(e,t){if(0<=e){var n=avalon.type(t);t&&t.$model&&(t=t.$model);var a=this[e];if("object"===n)for(var r in t)a.hasOwnProperty(r)&&(a[r]=t[r]);else"array"===n?a.clear().push.apply(a,t):a!==t&&(this[e]=t,this.$model[e]=t,w(this,"set",e,t))}return this}};"sort,reverse".replace(fe,function(e){xn[e]=function(){var t=this.$model,n=t.slice(0),a=!1;ye[e].apply(t,arguments);for(var r=0,i=n.length;r<i;r++){var o=t[r];if(!Ae(o,n[r])){var a=!0,o=n.indexOf(o,r),l=this._splice(o,1)[0],s=n.splice(o,1)[0];this._splice(r,0,l),n.splice(r,0,s),w(this,"move",o,r)}}return a&&w(this,"index",0),this}});var $n=e.createTreeWalker?function(t){t=e.createTreeWalker(t,NodeFilter.SHOW_COMMENT,null,null);for(var n,a=[];n=t.nextNode();)a.push(n);return a}:function(e){return e.getElementsByTagName("!")},Tn=r("$index,$first,$last"),wn=[],En=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,Cn=/^<(a|img)\s/i,On=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Mn=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,Nn=/\s+(src|href)(?:=("javascript[^"]*"|'javascript[^']*'))?/gi,An=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_n=/([^\#-~| |!])/g,kn=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n=void 0===n?"...":n,e.length>t?e.slice(0,t-n.length)+n:String(e)},camelize:g,sanitize:function(e){return e.replace(En,"").replace(Mn,function(e,t){return Cn.test(e)&&(e=e.replace(Nn," $1=''")),e.replace(On," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(An,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(_n,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,t){return(t||"￥")+avalon.filters.number(e)},number:function(e,t,n,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,""),e=isFinite(+e)?+e:0,t=isFinite(+t)?Math.abs(t):0,a=a||",",n=n||".";var r="",r=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n},r=(t?r(e,t):""+Math.round(e)).split(".");return 3<r[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=Array(t-r[1].length+1).join("0")),r.join(n)}};new function(){function e(e,t,n){var a="";for(0>e&&(a="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),a+e}function t(t,n,a,r){return function(i){return i=i["get"+t](),(0<a||i>-a)&&(i+=a),0===i&&-12===a&&(i=12),e(i,n,r)}}function n(e,t){return function(n,a){var r=n["get"+e](),i=(t?"SHORT"+e:e).toUpperCase();return a[i][r]}}function a(e){var t;if(t=e.match(l)){e=new Date(0);var n=0,a=0,r=t[8]?e.setUTCFullYear:e.setFullYear,i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=parseInt(t[9]+t[10],10),a=parseInt(t[9]+t[11],10)),r.call(e,parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10)),n=parseInt(t[4]||0,10)-n,a=parseInt(t[5]||0,10)-a,r=parseInt(t[6]||0,10),t=Math.round(1e3*parseFloat("0."+(t[7]||0))),i.call(e,n,a,r,t)}return e}var r={yyyy:t("FullYear",4),yy:t("FullYear",2,0,!0),y:t("FullYear",1),MMMM:n("Month"),MMM:n("Month",!0),MM:t("Month",2,1),M:t("Month",1,1),dd:t("Date",2),d:t("Date",1),HH:t("Hours",2),H:t("Hours",1),hh:t("Hours",2,-12),h:t("Hours",1,-12),mm:t("Minutes",2),m:t("Minutes",1),ss:t("Seconds",2),s:t("Seconds",1),sss:t("Milliseconds",3),EEEE:n("Day"),EEE:n("Day",!0),a:function(e,t){return 12>e.getHours()?t.AMPMS[0]:t.AMPMS[1]},Z:function(t){return t=-1*t.getTimezoneOffset(),t=(0<=t?"+":"")+(e(Math[0<t?"floor":"ceil"](t/60),2)+e(Math.abs(t%60),2))}},i=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,o=/^\d+$/,l=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,s=/^(\d+)-(\d+)-(\d{4})$/,c=/^(\d+)\s+(\d+),(\d{4})$/;kn.date=function(e,t){var n,l,u=kn.date.locate,f="",p=[];if(t=t||"mediumDate",t=u[t]||t,"string"==typeof e&&(o.test(e)?e=parseInt(e,10):(l=e.trim(),(l.match(s)||l.match(c))&&(e=RegExp.$3+"/"+RegExp.$1+"/"+RegExp.$2),e=a(e)),e=new Date(e)),"number"==typeof e&&(e=new Date(e)),"date"===avalon.type(e)){for(;t;)(l=i.exec(t))?(p=p.concat(l.slice(1)),t=p.pop()):(p.push(t),t=null);return p.forEach(function(t){n=r[t],f+=n?n(e,u):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}};var u={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d ah:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"ah:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};u.SHORTMONTH=u.MONTH,kn.date.locate=u};var Sn,Ln=avalon.modules={"ready!":{exports:avalon},avalon:{exports:avalon,state:2}};new function(){function r(e){return(e||"").replace(/[?#].*/,"")}function i(t){var n;try{a.b.c()}catch(r){n=r.stack,!n&&le.opera&&(n=(String(r).match(/of linked script \S+/g)||[]).join(" "))}if(n)return n=n.split(/[@ ]/g).pop(),n="("===n[0]?n.slice(1,-1):n.replace(/\s/,""),n.replace(/(:\d+)?:\d+$/i,"");n=(t?e:we).getElementsByTagName("script");for(var i,o=n.length;i=n[--o];)if((t||i.className===oe)&&"interactive"===i.readyState)return i.className=i.src}function o(e,t){for(var n in e)if("司徒正美"===e[n]&&2!==Ln[n].state&&(n===t||o(Ln[n].deps,t)))return!0}function l(){var e,t=d.length;e:for(;e=d[--t];){e=Ln[e];var n,a=e.deps;for(n in a)if(me.call(a,n)&&2!==Ln[n].state)continue e;2!==e.state&&(d.splice(t,1),f(e.id,e.args,e.factory),l())}}function s(e,t,a){var i=r(e.src);return e.onload=e.onreadystatechange=e.onerror=null,!(t||a&&!Ln[i].state)||(setTimeout(function(){we.removeChild(e),e=null}),void n("debug: 加载 "+i+" 失败"+t+" "+!Ln[i].state))}function c(e,n,a,i){if("ready!"===e||Ln[e]&&2===Ln[e].state)return e;var o;if(e=e.replace(/^\w+!/,function(e){return o=e.slice(0,-1),""}),o=o||"js",o=Ze[o]||t,"object"==typeof h.shim[e]&&(i=h.shim[e]),h.paths[e]&&(e=h.paths[e]),/^(\w+)(\d)?:.*/.test(e))a=e;else{n=n.substr(0,n.lastIndexOf("/"));var l=e.charAt(0);if("."!==l&&"/"!==l)a=p+e;else if("./"===e.slice(0,2))a=n+e.slice(1);else if(".."===e.slice(0,2))for(a=n+"/"+e;g.test(a);)a=a.replace(g,"");else"/"===l?a=e:avalon.error("不符合模块标识规则: "+e)}return e=r(a),(n=o.ext)&&e.slice(0-n.length)!==n&&(a+=n),h.nocache&&(a+=(-1===a.indexOf("?")?"?":"&")+(new Date-0)),o(a,i)}function u(t,a,r){var i=e.createElement("script");i.className=oe,i[$e?"onload":"onreadystatechange"]=function(){if($e||/loaded|complete/i.test(i.readyState)){var e=v.pop();e&&e.delay(a),r&&r(),s(i,!1,!$e)&&n("debug: 已成功加载 "+t)}},i.onerror=function(){s(i,!0)},i.src=t,we.insertBefore(i,we.firstChild),n("debug: 正准备加载 "+t)}function f(e,t,n){for(var a,r=0,i=[];a=t[r++];)i.push(Ln[a].exports);return t=Object(Ln[e]),n=n.apply(le,i),t.state=2,void 0!==n&&(Ln[e].exports=n),n}var p,d=[],v=[];Ze.js=function(e,t){var n=r(e);return Ln[n]||(Ln[n]={id:n,exports:{}},t?Sn(t.deps||"",function(){u(e,n,function(){Ln[n].state=2,t.exports&&(Ln[n].exports="function"==typeof t.exports?t.exports():le[t.exports]),Sn.checkDeps()})}):u(e,n)),n},Ze.css=function(t){var n=t.replace(/(#.+|\W)/g,"");if(!e.getElementById(n)){var a=e.createElement("link");a.rel="stylesheet",a.href=t,a.id=n,we.insertBefore(a,we.firstChild)}},Ze.css.ext=".css",Ze.js.ext=".js",Ze.text=function(e){var t=tn(),n=e.replace(/[?#].*/,"");return Ln[n]={},t.onreadystatechange=function(){if(4===t.readyState){var a=t.status;399<a&&600>a?avalon.error(e+" 对应资源不存在或没有开启 CORS"):(Ln[n].state=2,Ln[n].exports=t.responseText,Sn.checkDeps())}},t.open("GET",e,!0),"withCredentials"in t&&(t.withCredentials=!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(),n};var m=i(!0);m||(m=avalon.slice(e.scripts).pop().src),m=r(m),p=h.base=m.slice(0,m.lastIndexOf("/")+1);var g=/\/\w+\/\.\./;Sn=avalon.require=function(e,t,n){var a={},r=[],i=0,o=0,s=n||"callback"+setTimeout("1");n=n||p,String(e).replace(fe,function(e){(e=c(e,n))&&(i++,Ln[e]&&2===Ln[e].state&&o++,a[e]||(r.push(e),a[e]="司徒正美"))}),Ln[s]={id:s,factory:t,deps:a,args:r,state:1},i===o?f(s,r,t):d.unshift(s),l()},Sn.define=function(e,t,n){var a=be.call(arguments);if("string"==typeof e)var l=a.shift();"function"==typeof a[0]&&a.unshift([]);var s=Ln[l]&&1<=Ln[l].state?l:r(i());!Ln[s]&&l&&(Ln[s]={id:s,factory:n,state:1}),n=a[1],n.id=l,n.delay=function(e){a.push(e);var t=!0;try{t=o(Ln[e].deps,e)}catch(r){}t&&avalon.error(e+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+e+"模块"),delete n.delay,Sn.apply(null,a)},s?n.delay(s,a):v.push(n)},Sn.define.amd=Ln,Sn.config=h,Sn.checkDeps=l};var Hn=$e?"DOMContentLoaded":"readystatechange";"complete"===e.readyState?setTimeout(ne):$e?(e.addEventListener(Hn,ne),le.addEventListener("load",ne)):(e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&ne()}),le.attachEvent("onload",ne),Te.doScroll&&ae()),avalon.config({loader:!0}),avalon.ready=function(e){Sn("ready!",e)},avalon.ready(function(){if(le.VBArray&&!le.setImmediate){var t=[];avalon.nextTick=function(n){"function"==typeof n&&t.push(n);var a=e.createElement("script");a.onreadystatechange=function(){var e=t.shift();e&&(e(),t.length&&avalon.nextTick()),a.onreadystatechange=null,we.removeChild(a),a=null},we.appendChild(a)}}avalon.scan(e.body)})}(document);