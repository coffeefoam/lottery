function editHashPair(t,e){return HashMap.hashMapSingleton.editPair(t,e)}function getHashObject(t){return HashMap.hashMapSingleton.getObject(t)}function deleteHashPair(t){HashMap.hashMapSingleton.deletePair(t)}function reverseDeleteHashPairs(t){HashMap.hashMapSingleton.reverseDeletePair(t)}function getHashKeyListCopy(){return HashMap.hashMapSingleton.getKeyListCopy()}function getHashObjectListCopy(){return HashMap.hashMapSingleton.getObjectListCopy()}function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];InitConfig.isRelease||console.log(Array.prototype.join.call(arguments," "))}var connect;!function(t){var e=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=__define,i=t;return i.prototype,e(t,"CONNECT_COMPLETE",function(){return"connect complete"}),e(t,"CONNECT_FAULT",function(){return"connect fault"}),t.connectToURL=function(t,e,i,r){void 0===r&&(r=egret.URLRequestMethod.GET);var n=new egret.URLRequest(t),s=new egret.URLLoader;n.method=r,editHashPair(s,n),this.loaderArray.push(s),this.methodArray.push(e.bind(i)),s.addEventListener(egret.Event.COMPLETE,this.onComplete,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),s.load(n)},t.onError=function(t){var e=t.target,i=this.loaderArray.indexOf(e),r=this.methodArray[i];return e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this.reconnectTimes<10?(trace("链接服务器失败，准备再次尝试.."),r.length<1?r.call(null):r.call(null,this.CONNECT_FAULT),this.reconnectTimes++,void setTimeout(e.load,500,getHashObject(e))):(ConcreteSubject.notify(SubjectTypes.LINK_FAULT),void trace("多次访问服务器失败，请检查网络链接并手动刷新页面"))},t.onComplete=function(t){var e=t.target,i=this.loaderArray.indexOf(e),r=this.methodArray[i];e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),deleteHashPair(e),this.reconnectTimes=0,r.length<1?r.call(null):r.call(null,t.target.data),e.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this.loaderArray.splice(i,1),this.methodArray.splice(i,1)},t.methodArray=new Array,t.loaderArray=new Array,t.reconnectTimes=0,t}();t.NetworkConnector=e,egret.registerClass(e,"connect.NetworkConnector")}(connect||(connect={}));var displayLite;!function(t){var e=function(t){function e(e,i,r,n,s){void 0===r&&(r=i),void 0===n&&(n=i),void 0===s&&(s=!0),t.call(this),this.$isPlaying=!0,this.reconstruct(e,i,r,n,s)}__extends(e,t);var i=__define,r=e,n=r.prototype;return n.reconstruct=function(t,e,i,r,n){void 0===i&&(i=e),void 0===r&&(r=e),void 0===n&&(n=!0);var s=RES.getRes(t+r);if(e>i)throw new Error("Texture对象最大序号max不能少于最小序号min");if(e>r||r>i)throw new Error("Texture对象的初始序号start超出有效范围");this.$isPlaying=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.playHandler,this),this.texturePrefix=t,this.min=Math.floor(e),this.max=Math.floor(i),this.start=Math.floor(r),this.$totalFrames=this.max-this.min+1,this.$currentFrame=this.start-this.min+1,this.$bitmap||(this.$bitmap=new egret.Bitmap,this.addChild(this.$bitmap)),this.$bitmap.texture=s,n&&this.play(),this.callBackFunctionCollection=new Array},n.addFrameScript=function(t,e,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=this),Math.floor(t)<0||Math.floor(t)>this.totalFrames-1)throw new Error("事件帧序号超出有效范围");this.callBackFunctionCollection[Math.floor(t)]=e.bind(r),i&&Math.floor(t)==this.start&&this.callBackFunctionCollection[Math.floor(t)].call(null)},n.removeFrameScript=function(t){if(Math.floor(t)<0||Math.floor(t)>this.totalFrames-1)throw new Error("事件帧序号超出有效范围");this.callBackFunctionCollection&&this.callBackFunctionCollection[Math.floor(t)]&&delete this.callBackFunctionCollection[Math.floor(t)]},n.play=function(){return 1==this.$totalFrames?void this.stop():(this.$isPlaying=!0,void this.addEventListener(egret.Event.ENTER_FRAME,this.playHandler,this))},n.gotoAndPlay=function(t){if(1==this.$totalFrames)return void this.stop();this.$currentFrame=Math.floor(t),this.$currentFrame<1?this.$currentFrame=1:this.$currentFrame>this.totalFrames&&(this.$currentFrame=this.totalFrames),this.start=this.$currentFrame-1+this.min;var e=RES.getRes(this.texturePrefix+this.start);this.$bitmap.texture=e,this.callBackFunctionCollection&&this.callBackFunctionCollection[this.$currentFrame-1]&&this.callBackFunctionCollection[this.$currentFrame-1].call(null),this.$isPlaying=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.playHandler,this)},n.stop=function(){this.$isPlaying=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.playHandler,this)},n.gotoAndStop=function(t){if(1==this.$totalFrames)return void this.stop();this.$currentFrame=Math.floor(t),this.$currentFrame<1?this.$currentFrame=1:this.$currentFrame>this.totalFrames&&(this.$currentFrame=this.totalFrames),this.start=this.$currentFrame-1+this.min;var e=RES.getRes(this.texturePrefix+this.start);this.$bitmap.texture=e,this.callBackFunctionCollection&&this.callBackFunctionCollection[this.$currentFrame-1]&&this.callBackFunctionCollection[this.$currentFrame-1].call(null),this.$isPlaying=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.playHandler,this)},n.playHandler=function(t){this.$isPlaying&&this.autoNextFrame()},n.autoNextFrame=function(){this.start<=this.max&&this.start++,this.start>this.max&&(this.isPlaying?this.start=this.min:this.start=this.max),this.$currentFrame=this.start-this.min+1;var t=RES.getRes(this.texturePrefix+this.start);this.$bitmap.texture=t,this.callBackFunctionCollection&&this.callBackFunctionCollection[this.$currentFrame-1]&&this.callBackFunctionCollection[this.$currentFrame-1].call(null)},n.autoPrevFrame=function(){this.start>this.min&&this.start--,this.start<this.min&&(this.start=this.min),this.$currentFrame=this.start-this.min+1;var t=RES.getRes(this.texturePrefix+this.start);this.$bitmap.texture=t,this.callBackFunctionCollection&&this.callBackFunctionCollection[this.$currentFrame-1]&&this.callBackFunctionCollection[this.$currentFrame-1].call(null)},n.nextFrame=function(){this.stop(),this.start<this.max&&this.autoNextFrame()},n.prevFrame=function(){this.stop(),this.start>this.min&&this.autoPrevFrame()},i(n,"totalFrames",function(){return this.$totalFrames}),i(n,"currentFrame",function(){return this.$currentFrame}),i(n,"isPlaying",function(){return this.$isPlaying}),n.cheakNumber=function(t){return-1==t.toString().indexOf(".")},i(n,"scaleWidth",function(){return this.width*this.scaleX},function(t){this.scaleX=t/this.width}),i(n,"scaleHeight",function(){return this.height*this.scaleY},function(t){this.scaleY=t/this.height}),n.destory=function(){},e}(egret.Sprite);t.AnimationLite=e,egret.registerClass(e,"displayLite.AnimationLite",["displayLite.IDisplayObjectLite","egret.IEventDispatcher"])}(displayLite||(displayLite={}));var displayLite;!function(t){var e=function(t){function e(e,i,r){void 0===i&&(i=e),void 0===r&&(r=e),t.call(this),this.reconstruct(e,i,r)}__extends(e,t);var i=__define,r=e,n=r.prototype;return n.reconstruct=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=t),this.$normalTexture=t,this.$pressTexture=e,this.$forbiddenTexture=i,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage&&(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)),this.turnNormal(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},n.setScale9Grids=function(t){this.normalScale9Grid=t.normalGrid,this.pressScale9Grid=t.pressGrid,this.forbiddenScale9Grid=t.forbiddenGrid},n.onTouchBegin=function(t){this.turnPress(),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(t){var e=this.globalToLocal(t.stageX,t.stageY),i=this.getBounds(),r=new egret.Rectangle(i.x+this.anchorOffsetX,i.y+this.anchorOffsetY,i.width,i.height);e.x<r.x||e.y<r.y||e.x>r.x+r.width||e.y>r.y+r.height?"normal"!=this.$currentTexture&&this.turnNormal():"press"!=this.$currentTexture&&this.turnPress()},n.touchEnd=function(t){this.turnNormal(),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.turnNormal=function(){this.scale9Grid=this.$normalScale9Grid,this.texture=RES.getRes(this.$normalTexture),this.$currentTexture="normal"},n.turnPress=function(){this.scale9Grid=this.$pressScale9Grid,this.texture=RES.getRes(this.$pressTexture),this.$currentTexture="press"},n.turnForbidden=function(){this.scale9Grid=this.$forbiddenScale9Grid,this.texture=RES.getRes(this.$forbiddenTexture),this.$currentTexture="forbidden"},i(n,"touchEnabled",function(){return this.$touchEnabled},function(e){this.$touchEnabled!=e&&(0==e?(this.touchEnd(null),this.turnForbidden()):1==e&&this.turnNormal(),t.prototype.$setTouchEnabled.call(this,e),this.$touchEnabled=e)}),i(n,"normalScale9Grid",function(){return this.$normalScale9Grid},function(t){this.$normalScale9Grid=t,"normal"==this.$currentTexture&&this.turnNormal()}),i(n,"pressScale9Grid",function(){return this.$pressScale9Grid},function(t){this.$pressScale9Grid=t,"press"==this.$currentTexture&&this.turnPress()}),i(n,"forbiddenScale9Grid",function(){return this.$forbiddenScale9Grid},function(t){this.$forbiddenScale9Grid=t,"forbidden"==this.$currentTexture&&this.turnForbidden()}),i(n,"scaleWidth",function(){return this.width*this.scaleX},function(t){this.scaleX=t/this.width}),i(n,"scaleHeight",function(){return this.height*this.scaleY},function(t){this.scaleY=t/this.height}),n.destory=function(){},e}(egret.Bitmap);t.ButtonLite=e,egret.registerClass(e,"displayLite.ButtonLite",["displayLite.IDisplayObjectLite","egret.IEventDispatcher"])}(displayLite||(displayLite={}));var displayLite;!function(t){var e=function(t){function e(e,i,r){void 0===r&&(r=e),t.call(this),this.reconstruct(e,i,r)}__extends(e,t);var i=__define,r=e,n=r.prototype;return n.reconstruct=function(t,e,i){void 0===e&&(e=t),void 0===i&&(i=t),this.$normalTexture=t,this.$pressTexture=e,this.$forbiddenTexture=i,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage&&(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)),this.turnNormal(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)},n.setScale9Grids=function(t){this.normalScale9Grid=t.normalGrid,this.pressScale9Grid=t.pressGrid,this.forbiddenScale9Grid=t.forbiddenGrid},n.onTouchBegin=function(t){this.turnPress(),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.touchMove=function(t){this.hitTestPoint(t.stageX,t.stageY,!0)?"press"!=this.$currentTexture&&this.turnPress():"normal"!=this.$currentTexture&&this.turnNormal()},n.touchEnd=function(t){this.turnNormal(),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this)},n.turnNormal=function(){this.scale9Grid=this.$normalScale9Grid,this.texture=RES.getRes(this.$normalTexture),this.$currentTexture="normal"},n.turnPress=function(){this.scale9Grid=this.$pressScale9Grid,this.texture=RES.getRes(this.$pressTexture),this.$currentTexture="press"},n.turnForbidden=function(){this.scale9Grid=this.$forbiddenScale9Grid,this.texture=RES.getRes(this.$forbiddenTexture),this.$currentTexture="forbidden"},i(n,"touchEnabled",function(){return this.$touchEnabled},function(e){this.$touchEnabled!=e&&(0==e?(this.touchEnd(null),this.turnForbidden()):1==e&&this.turnNormal(),t.prototype.$setTouchEnabled.call(this,e),this.$touchEnabled=e)}),i(n,"normalScale9Grid",function(){return this.$normalScale9Grid},function(t){this.$normalScale9Grid=t,"normal"==this.$currentTexture&&this.turnNormal()}),i(n,"pressScale9Grid",function(){return this.$pressScale9Grid},function(t){this.$pressScale9Grid=t,"press"==this.$currentTexture&&this.turnPress()}),i(n,"forbiddenScale9Grid",function(){return this.$forbiddenScale9Grid},function(t){this.$forbiddenScale9Grid=t,"forbidden"==this.$currentTexture&&this.turnForbidden()}),i(n,"localWidth",function(){return this.width*this.scaleX},function(t){this.scaleX=t/this.width}),i(n,"localHeight",function(){return this.height*this.scaleY},function(t){this.scaleY=t/this.height}),e}(egret.Bitmap);t.ButtonPlus=e,egret.registerClass(e,"displayLite.ButtonPlus")}(displayLite||(displayLite={}));var Scale9Grids=function(){function t(t,e,i){void 0===e&&(e=t),void 0===i&&(i=t),this.normalGrid=t,this.pressGrid=e,this.forbiddenGrid=i}var e=(__define,t);return e.prototype,t}();egret.registerClass(Scale9Grids,"Scale9Grids");var displayLite;!function(t){var e=function(t){function e(e){t.call(this),this.fcoArray=e,this.frameDisplayObjectsArray=new Object,this.labelFromIndex=new Object,this.indexFromLabel=new Object,this.continuationFromIndex=new Object,this.layerFromIndex=new Object;for(var i=0;i<e.length;i++){var r=e[i].frame-1;this.frameDisplayObjectsArray[r]=e[i].classNameArray,this.indexFromLabel["lable_"+e[i].frameLable]=r,this.labelFromIndex[r]=e[i].frameLable,this.continuationFromIndex=e[i].continuation,this.layerFromIndex=e[i].layer}}__extends(e,t);var i=__define,r=e,n=r.prototype;return n.gotoAndStop=function(t){},i(n,"scaleWidth",function(){return this.width*this.scaleX},function(t){this.scaleX=t/this.width}),i(n,"scaleHeight",function(){return this.height*this.scaleY},function(t){this.scaleY=t/this.height}),n.destory=function(){},e}(egret.Sprite);t.MovieClipPlus=e,egret.registerClass(e,"displayLite.MovieClipPlus",["displayLite.IDisplayObjectLite","egret.IEventDispatcher"])}(displayLite||(displayLite={}));var FrameContentObject=function(){function t(t,e,i,r,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=1),void 0===n&&(n=0),this.frame=0,this.frame=1>t?1:Math.floor(t),this.classNameArray=e,this.frameLable=i,this.continuation=1>r?1:Math.floor(r),this.layer=n}var e=(__define,t);return e.prototype,t}();egret.registerClass(FrameContentObject,"FrameContentObject");var TypeAndName=function(){function t(t,e){this.classType=t,this.instanceName=e}var e=(__define,t);return e.prototype,t}();egret.registerClass(TypeAndName,"TypeAndName");var esm;!function(t){var e=function(){function t(){throw new Error(t.__class__+" 是静态方法集成类，不需要实例化")}var e=__define,i=t;return i.prototype,e(t,"isOpen",function(){return t._isSoundOpen},function(e){t._isSoundOpen=e,t._isSoundOpen?t.setAllVolumeToDefault():t.setAllVolume(0)}),t.registerSound=function(e,i,r){if(void 0===r&&(r=1),t.soundObject[e])throw new Error("该音效名称已被注册");i.type=egret.Sound.EFFECT,t.soundObject[e]=i,t.defaultVolumeObject[e]=r},t.registerAudio=function(e,i,r){if(void 0===r&&(r=1),t.soundObject[e])throw new Error("该音效名称已被注册");t.soundObject[e]=i,t.defaultVolumeObject[e]=r},t.playSound=function(e,i,r,n){if(void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=NaN),!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");if(t.isOpen&&!(ActivateRunTimes.deviationCurrentTimes>500)){var s=t.soundObject[e];if(egret.is(s,"egret.Sound")){t.soundChannelObject[e]&&t.soundChannelObject[e].stop(),t.isOpen?isNaN(n)&&(n=t.defaultVolumeObject[e]):n=0;var a=s.play(i,r);a.volume=n,t.soundChannelObject[e]=a}else t.isOpen?isNaN(n)&&(n=t.defaultVolumeObject[e],s.muted=!1):(n=0,s.muted=!0),s.volume=n,s.currentTime=i/1e3,s.loop=!1,0==Math.floor(r)&&(s.loop=!0),Math.floor(r)>1&&(t.loopTotalTimesObject[e]=r,t.loopCurrentTimeObject[e]=0,s.addEventListener("ended",function(){t.loopCurrentTimeObject[e]++,t.loopCurrentTimeObject[e]<r&&s.play()})),s.play()}},t.stopSound=function(e){if(!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");var i=t.soundObject[e];egret.is(i,"egret.Sound")?t.soundChannelObject[e]&&(t.soundChannelObject[e].stop(),delete t.soundChannelObject[e]):(i.stop(),i.muted=!0)},t.stopAllSound=function(){for(var e in t.soundObject){var i=t.soundObject[e];egret.is(i,"egret.Sound")?t.soundChannelObject[e]&&(t.soundChannelObject[e].stop(),delete t.soundChannelObject[e]):(i.pause(),i.muted=!0)}},t.setVolume=function(e,i){if(!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");var r=t.soundObject[e];if(egret.is(r,"egret.Sound")){if(t.isOpen||0==i){var n=t.soundChannelObject[e];n&&(n.volume=i)}}else(t.isOpen||0==i)&&(r.volume=i,0==i?r.muted=!0:r.muted=!1)},t.setAllVolume=function(e){if(t.soundObject&&(t.isOpen||0==e))for(var i in t.soundObject){var r=t.soundObject[i];if(egret.is(r,"egret.Sound")){var n=t.soundChannelObject[i];n&&(n.volume=e)}else r.volume=e,0==e?r.muted=!0:r.muted=!1}},t.setVolumeToDefault=function(e){if(!t.soundObject)throw new Error("该音效尚未被注册和实例化");if(!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");if(t.isOpen||0==t.defaultVolumeObject[e]){var i=t.soundObject[e];if(egret.is(i,"egret.Sound")){var r=t.soundChannelObject[e];r&&(r.volume=t.defaultVolumeObject[e])}else i.volume=t.defaultVolumeObject[e],0==i.volume?i.muted=!0:i.muted=!1}},t.setAllVolumeToDefault=function(){if(t.soundChannelObject)for(var e in t.soundObject){var i=t.soundObject[e];if(egret.is(i,"egret.Sound")){var r=t.soundChannelObject[e];r&&(r.volume=t.defaultVolumeObject[e])}else i.volume=t.defaultVolumeObject[e],0==i.volume?i.muted=!0:i.muted=!1}},t.setDefaultVolume=function(e,i){if(!t.soundObject)throw new Error("该音效尚未被注册和实例化");if(!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");t.defaultVolumeObject[e]=i},t.getDefaultVolume=function(e){if(!t.soundObject)throw new Error("该音效尚未被注册和实例化");if(!t.soundObject[e])throw new Error("该音效尚未被注册和实例化");return t.defaultVolumeObject[e]},t.soundObject=new Object,t.defaultVolumeObject=new Object,t.soundChannelObject=new Object,t.loopCurrentTimeObject=new Object,t.loopTotalTimesObject=new Object,t._isSoundOpen=!0,t}();t.SoundEffectManager=e,egret.registerClass(e,"esm.SoundEffectManager")}(esm||(esm={}));var esm;!function(t){var e=function(){function t(){throw new Error(this.__class__+" 是静态方法集成类，不需要实例化")}var e=__define,i=t;return i.prototype,e(t,"isOpen",function(){return this._isSoundOpen},function(t){this._isSoundOpen=t,this._isSoundOpen?this.setAllVolumeToDefault():this.setAllVolume(0)}),t.registerSound=function(t,e,i){if(void 0===i&&(i=1),this.soundObject||(this.soundObject=new Object,this.defaultVolumeObject=new Object),this.soundObject[t])throw new Error("该音乐名称已被注册");e.type=egret.Sound.MUSIC,this.soundObject[t]=e,this.defaultVolumeObject[t]=i},t.playSound=function(t,e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=NaN),!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");var n=this.soundObject[t];this.soundChannelObject||(this.soundChannelObject=new Object),this.soundChannelObject[t]&&this.soundChannelObject[t].stop(),this.isOpen?isNaN(r)&&(r=this.defaultVolumeObject[t]):r=0;var s=n.play(e,i);return s.volume=r,this.soundChannelObject[t]=s,s},t.stopSound=function(t){if(!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");this.soundChannelObject||(this.soundChannelObject=new Object),this.soundChannelObject[t]&&(this.soundChannelObject[t].stop(),delete this.soundChannelObject[t])},t.stopAllSound=function(){if(this.soundChannelObject)for(var t in this.soundChannelObject)this.soundChannelObject[t].stop(),delete this.soundChannelObject[t]},t.setVolume=function(t,e){if(!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");if(this.soundChannelObject||(this.soundChannelObject=new Object),(this.isOpen||0==e)&&this.soundChannelObject[t]){var i=this.soundChannelObject[t];i.volume=e}},t.setAllVolume=function(t){if(this.soundChannelObject&&(this.isOpen||0==t))for(var e in this.soundChannelObject){var i=this.soundChannelObject[e];i.volume=t}},t.setVolumeToDefault=function(t){if(!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");if(this.isOpen||0==this.defaultVolumeObject[t]){var e=this.soundChannelObject[t];e.volume=this.defaultVolumeObject[t]}},t.setAllVolumeToDefault=function(){if(this.soundChannelObject)for(var t in this.soundChannelObject){var e=this.soundChannelObject[t];e.volume=this.defaultVolumeObject[t]}},t.setDefaultVolume=function(t,e){if(!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");this.defaultVolumeObject[t]=e},t.getDefaultVolume=function(t){if(!this.soundObject)throw new Error("该音乐尚未被注册和实例化");if(!this.soundObject[t])throw new Error("该音乐尚未被注册和实例化");return this.defaultVolumeObject[t]},t._isSoundOpen=!0,t}();t.SoundMusicManager=e,egret.registerClass(e,"esm.SoundMusicManager")}(esm||(esm={}));var AboutBrowser=function(){function t(){}var e=(__define,t);return e.prototype,t.getInfo=function(){var t=new BrowserInfo,e=navigator.userAgent;return e.indexOf("UCBrowser")>-1?(t.browserKey="UCBrowser",t.description="您当前使用的是：UC浏览器"):e.indexOf("2345Browser")>-1?(t.browserKey="2345Browser",t.description="您当前使用的是：2345浏览器"):e.indexOf("JiSuLiuLanQiHD")>-1?(t.browserKey="JiSuLiuLanQiHD",t.description="您当前使用的是：极速浏览器HD"):e.indexOf("searchBrowser")>-1?(t.browserKey="searchBrowser",t.description="您当前使用的是：极速浏览器"):e.indexOf("CriOS")>-1?(t.browserKey="CriOS",t.description="您当前使用的是：谷歌浏览器(ios)"):e.indexOf("MQQBrowser")>-1?(t.browserKey="MQQBrowser",t.description="您当前使用的是：QQ浏览器"):e.indexOf("OPiOS")>-1?(t.browserKey="OPiOS",t.description="您当前使用的是：欧朋浏览器(ios)"):e.indexOf("baidubrowser")>-1?(t.browserKey="baidubrowser",t.description="您当前使用的是：百度浏览器"):e.indexOf("FlyFlow")>-1?(t.browserKey="FlyFlow",t.description="您当前使用的是：百度FlyFlow浏览器"):e.indexOf("BaiduHD")>-1?(t.browserKey="BaiduHD",t.description="您当前使用的是：百度浏览器HD"):e.indexOf("FxiOS")>-1?(t.browserKey="FxiOS",t.description="您当前使用的是：火狐浏览器(ios)"):e.indexOf("FingerBrowser")>-1?(t.browserKey="FingerBrowser",t.description="您当前使用的是：指尖浏览器"):e.indexOf("MXiOS")>-1?(t.browserKey="MXiOS",t.description="您当前使用的是：遨游云浏览器(ios)"):e.indexOf("MxBrowser")>-1?(t.browserKey="MxBrowser",e.indexOf("Android")>-1?t.description="您当前使用的是：遨游云浏览器(android)":t.description="您当前使用的是：遨游云浏览器"):e.indexOf("LieBaoFast")>-1?(t.browserKey="LieBaoFast",t.description="您当前使用的是：猎豹浏览器"):e.indexOf("360 Aphone Browser")>-1?(t.browserKey="360 Aphone Browser",t.description="您当前使用的是：360 Aphone浏览器"):e.indexOf("HaoWangZhiDaQuanHD")>-1?(t.isAdvise=!0,t.browserKey="HaoWangZhiDaQuanHD",t.description="您当前使用的是：好网址大全浏览器。为了更好的体验，建议更换其他主流浏览器打开本页面"):e.indexOf("SogouMobileBrowser")>-1?(t.browserKey="SogouMobileBrowser",t.description="您当前使用的是：搜狗浏览器"):e.indexOf("Firefox")>-1?(t.browserKey="Firefox",e.indexOf("Android")>-1?t.description="您当前使用的是：火狐浏览器(android)":t.description="您当前使用的是：火狐浏览器"):e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1?(t.browserKey="Chrome&Safari",e.indexOf("Android")>-1?t.description="您当前使用的是：谷歌或其他无法识别的谷歌内核浏览器(android)":t.description="您当前使用的是：谷歌或其他无法识别的谷歌内核浏览器"):e.indexOf(" OPR")>-1&&e.indexOf("Safari")>-1?(t.browserKey="OPR&Safari",e.indexOf("Android")>-1?t.description="您当前使用的是：欧朋浏览器(android)":t.description="您当前使用的是：欧朋浏览器"):e.indexOf("Chrome")>-1?(t.browserKey="Chrome",t.isAdvise=!0,t.description="您当前使用的浏览器属于Chrome类型，具体名称不详。为了更好的体验，建议更换其他主流浏览器打开本页面"):e.indexOf("Safari")>-1?(t.isAdvise=!0,t.description="您当前使用的是：Safari或无法识别的Safari类型浏览器"):(t.isAdvise=!0,t.description="您当前使用的浏览器具体名称不详。为了更好的体验，建议更换其他主流浏览器打开本页面"),t},t.browserKeyCollection=["UCBrowser","2345Browser","JiSuLiuLanQiHD","searchBrowser","CriOS","MQQBrowser","OPiOS","BaiduHD","FlyFlow","baidubrowser","FxiOS","FingerBrowser","MXiOS","MxBrowser","LieBaoFast","HaoWangZhiDaQuanHD","SogouMobileBrowser","360 Aphone Browser","Chrome","Firefox","OPR"],t}();egret.registerClass(AboutBrowser,"AboutBrowser");var BrowserInfo=function(){function t(){this.isAdvise=!1,this.description="您当前使用的浏览器是：不知名浏览器，为了更好的体验，建议更换其他浏览器打开本页面"}var e=(__define,t);return e.prototype,t}();egret.registerClass(BrowserInfo,"BrowserInfo");var HashMap=function(){function t(){this.keyArray=new Array,this.objArray=new Array}var e=__define,i=t,r=i.prototype;return e(t,"hashMapSingleton",function(){return this.instance||(this.instance=new t),this.instance}),r.editPair=function(t,e){var i=this.keyArray.indexOf(t);return-1==i?(this.keyArray.push(t),this.objArray.push(e)):this.objArray[i]=e,new HashPair(t,e)},r.getObject=function(t){var e=this.keyArray.indexOf(t);return-1!=e?this.objArray[e]:null},r.deletePair=function(t){var e=this.keyArray.indexOf(t);-1!=e&&(this.keyArray.splice(e,1),this.objArray.splice(e,1))},r.getKeyListCopy=function(){return this.keyArray.concat()},r.getObjectListCopy=function(){return this.objArray.concat()},r.reverseDeletePair=function(t){if(-1!=this.objArray.indexOf(t))for(var e=0;e<this.objArray.length;e++)this.objArray[e]==t&&(this.keyArray.splice(e,1),this.objArray.splice(e,1),e--)},t}();egret.registerClass(HashMap,"HashMap");var HashPair=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.key=t,this.object=e}var e=(__define,t);return e.prototype,t}();egret.registerClass(HashPair,"HashPair");var ActivateRunTimes=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=__define,i=t;return i.prototype,t.start=function(){t.timer&&(t.timer.stop(),t.timer.removeEventListener(egret.TimerEvent.TIMER,t.timerHandler,t)),t.$activateRunTime=0,t.$lastStepTime=egret.getTimer(),t.atStart=t.$lastStepTime,t.getTimerOnStart=t.$lastStepTime,t.timer=new egret.Timer(t.delta),t.timer.addEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),t.timer.start(),t.$isStartUsing=!0},t.stop=function(){t.timer&&(t.timer.stop(),t.timer.removeEventListener(egret.TimerEvent.TIMER,t.timerHandler,t)),t.$isStartUsing=!1},t.addCallbackBeforeStep=function(e,i,r){t.beforeFunHashMap.editPair(e,i.bind(r))},t.removeCallbackBeforeStep=function(e){t.beforeFunHashMap.deletePair(e)},t.addCallbackAfterStep=function(e,i,r){t.afterFunHashMap.editPair(e,i.bind(r))},t.removeCallbackAfterStep=function(e){t.afterFunHashMap.deletePair(e)},t.timerHandler=function(){t.funArray=t.beforeFunHashMap.getObjectListCopy();for(var e in t.funArray)t.funArray[e].call(null);t.$activateRunTime+=t.delta,t.$lastStepTime=egret.getTimer(),t.funArray=t.afterFunHashMap.getObjectListCopy();for(var i in t.funArray)t.funArray[i].call(null)},e(t,"isStartUsing",function(){return t.$isStartUsing}),e(t,"activateTimes",function(){return t.$isStartUsing?Math.round(t.$activateRunTime):(trace("ActivateRunTimes.start() 未被启用"),NaN)}),e(t,"startedTimes",function(){return t.$isStartUsing?Math.round(egret.getTimer()-t.getTimerOnStart):(trace("ActivateRunTimes.start() 未被启用"),NaN)}),e(t,"deviationTotalTimes",function(){return t.$isStartUsing?Math.round(t.startedTimes-t.$activateRunTime):(trace("ActivateRunTimes.start() 未被启用"),NaN)}),e(t,"deviationCurrentTimes",function(){return t.$isStartUsing?Math.round(egret.getTimer()-t.$lastStepTime):(trace("ActivateRunTimes.start() 未被启用"),NaN)}),t.delta=1e3/60,t.funArray=new Array,t.beforeFunHashMap=new HashMap,t.afterFunHashMap=new HashMap,t}();egret.registerClass(ActivateRunTimes,"ActivateRunTimes");var FrameDelayCaller=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=__define,i=t;return i.prototype,t.addCallerOnce=function(e,i,r,n){for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return t.addCallerRepeat.apply(t,[e,i,r,n,1].concat(s))},t.addCallerRepeat=function(e,i,r,n,s){void 0===s&&(s=0);for(var a=[],o=5;o<arguments.length;o++)a[o-5]=arguments[o];if(1>n&&(n=1,trace("提示：间隔帧数intervalFrames 不应该小于1")),null==i)throw new Error("错误：提供给 FrameDelayCaller 的回调函数不能为null");var l;t.objKeyFromCallerHash.getObject(e)?l=t.objKeyFromCallerHash.getObject(e):(t.$objID++,l="objKey"+t.$objID,t.objKeyFromCallerHash.editPair(e,l)),t.idArrFromObjKey[l]||(t.idArrFromObjKey[l]=new Array),t.$useAbleID++;var h=new egret.Shape,c="runnerKey"+t.$useAbleID;t.runnerKeyFromRunnerHash.editPair(h,c),t.idFromRunnerKey[c]=t.$useAbleID,t.functionFromID[t.$useAbleID]=i.bind(r),t.runnerFromID[t.$useAbleID]=h,t.currentFramesFromID[t.$useAbleID]=0,t.intervalFramesFromID[t.$useAbleID]=Math.floor(n),t.currentRepeatsFromID[t.$useAbleID]=0,t.totalRepeatsFromID[t.$useAbleID]=s,t.paramsFromID[t.$useAbleID]=a,t.isPauseFromID[t.$useAbleID]="run",t.objKeyFromID[t.$useAbleID]=l;var d=t.idArrFromObjKey[l];return d.push(t.$useAbleID),h.addEventListener(egret.Event.ENTER_FRAME,t.frameHandler,t),t.$useAbleID},t.frameHandler=function(e){var i=e.currentTarget,r=t.runnerKeyFromRunnerHash.getObject(i),n=t.idFromRunnerKey[r];if("pause"!=t.isPauseFromID[n]&&(t.currentFramesFromID[n]++,!(t.currentFramesFromID[n]<t.intervalFramesFromID[n]))){t.currentFramesFromID[n]=0,t.currentRepeatsFromID[n]++,t.$currentID=n,t.$currentRepeats=t.currentRepeatsFromID[n];var s=t.functionFromID[n],a=t.paramsFromID[n];s.apply(null,a),t.currentRepeatsFromID[n]>=t.totalRepeatsFromID[n]&&t.totalRepeatsFromID[n]>0&&t.clearCallerByID(n),t.$currentID=NaN,t.$currentRepeats=NaN}},t.clearCallerByID=function(e){var i=e;if(t.runnerFromID[i]){var r=t.runnerFromID[i],n=t.runnerKeyFromRunnerHash.getObject(r),s=t.objKeyFromID[i];delete t.idFromRunnerKey[n],delete t.runnerFromID[i],delete t.functionFromID[i],delete t.paramsFromID[i],delete t.currentFramesFromID[i],delete t.intervalFramesFromID[i],delete t.currentRepeatsFromID[i],delete t.totalRepeatsFromID[i],delete t.isPauseFromID[i],delete t.objKeyFromID[i];var a=t.idArrFromObjKey[s],o=a.indexOf(i);a.splice(o,1),0==a.length&&(t.objKeyFromCallerHash.reverseDeletePair(s),delete t.idArrFromObjKey[s]),t.runnerKeyFromRunnerHash.deletePair(r),r.removeEventListener(egret.Event.ENTER_FRAME,t.frameHandler,t)}},t.clearCallerAt=function(e){if(t.objKeyFromCallerHash.getObject(e)){var i=t.objKeyFromCallerHash.getObject(e),r=t.idArrFromObjKey[i],n=r.concat();for(var s in n)t.clearCallerByID(n[s])}},t.clearAllCallers=function(){for(var e in t.idFromRunnerKey)t.clearCallerByID(t.idFromRunnerKey[e]);t.$useAbleID=0,t.$objID=0},t.isPause=function(e){var i=e;return!!t.runnerFromID[i]&&"pause"==t.isPauseFromID[i]},t.pauseCallerByID=function(e){var i=e;if(t.runnerFromID[i]&&!t.isPause(e)){var r=t.runnerFromID[i];r.removeEventListener(egret.Event.ENTER_FRAME,t.frameHandler,t),t.isPauseFromID[i]="pause"}},t.pauseCallerAt=function(e){if(t.objKeyFromCallerHash.getObject(e)){var i=t.objKeyFromCallerHash.getObject(e),r=t.idArrFromObjKey[i],n=r.concat();for(var s in n)t.pauseCallerByID(n[s])}},t.pauseAllCallers=function(){for(var e in t.idFromRunnerKey)t.pauseCallerByID(t.idFromRunnerKey[e])},t.resumeCallerByID=function(e){var i=e;if(t.runnerFromID[i]&&t.isPause(e)){var r=t.runnerFromID[i];r.addEventListener(egret.Event.ENTER_FRAME,t.frameHandler,t),t.isPauseFromID[i]="run"}},t.resumeCallerAt=function(e){if(t.objKeyFromCallerHash.getObject(e)){var i=t.objKeyFromCallerHash.getObject(e),r=t.idArrFromObjKey[i],n=r.concat();for(var s in n)t.resumeCallerByID(n[s])}},t.resumeAllCallers=function(){for(var e in t.idFromRunnerKey)t.resumeCallerByID(t.idFromRunnerKey[e])},t.getCurrentID=function(){return isNaN(t.$currentID)?NaN:t.$currentID},t.getCurrentRepeats=function(){return isNaN(t.$currentRepeats)?NaN:t.$currentRepeats},e(t,"delayCallerList",function(){var e=t.objKeyFromCallerHash.getKeyListCopy();return e?0==e.length?null:e:null}),e(t,"callerIDList",function(){var e=new Array;if(t.idFromRunnerKey)for(var i in t.idFromRunnerKey)e.push(t.idFromRunnerKey[i]);return 0==e.length?null:e}),t.runnerFromID=new Object,t.idFromRunnerKey=new Object,t.currentFramesFromID=new Object,t.intervalFramesFromID=new Object,t.functionFromID=new Object,t.paramsFromID=new Object,t.currentRepeatsFromID=new Object,t.totalRepeatsFromID=new Object,t.idArrFromObjKey=new Object,t.isPauseFromID=new Object,t.objKeyFromID=new Object,t.$useAbleID=0,t.runnerKeyFromRunnerHash=new HashMap,t.$objID=0,t.objKeyFromCallerHash=new HashMap,
t}();egret.registerClass(FrameDelayCaller,"FrameDelayCaller");var GetNumChildrenTotal=function(){function t(){}var e=(__define,t);return e.prototype,t.getTotalAt=function(e){return t.count=0,t.getNumChildrenTotal(e),t.count},t.getListAt=function(e){t.lastDisplayObjectArray=t.currentDisplayObjectArray,t.currentDisplayObjectArray=new Array,t.getNumChildrenList(e),t.addedDisplayObjectArray=new Array,t.removedDisplayObjectArray=new Array;for(var i in t.currentDisplayObjectArray)-1==t.lastDisplayObjectArray.indexOf(t.currentDisplayObjectArray[i])&&t.addedDisplayObjectArray.push(t.currentDisplayObjectArray[i]);for(i in t.lastDisplayObjectArray)-1==t.currentDisplayObjectArray.indexOf(t.lastDisplayObjectArray[i])&&t.removedDisplayObjectArray.push(t.lastDisplayObjectArray[i]);var r=[t.currentDisplayObjectArray,t.addedDisplayObjectArray,t.removedDisplayObjectArray];return r},t.getNumChildrenTotal=function(e){t.count+=e.numChildren;for(var i=0;i<e.numChildren;i++)egret.is(e.getChildAt(i),"egret.DisplayObjectContainer")&&t.getNumChildrenTotal.call(t,e.getChildAt(i))},t.getNumChildrenList=function(e){for(var i=0;i<e.numChildren;i++)t.currentDisplayObjectArray.push(e.getChildAt(i)),egret.is(e.getChildAt(i),"egret.DisplayObjectContainer")&&t.getNumChildrenList.call(t,e.getChildAt(i))},t.currentDisplayObjectArray=new Array,t}();egret.registerClass(GetNumChildrenTotal,"GetNumChildrenTotal");var TimerDelayCaller=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=__define,i=t;return i.prototype,t.addCallerOnce=function(e,i,r,n){for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return t.addCallerRepeat.apply(t,[e,i,r,n,1].concat(s))},t.addCallerRepeat=function(e,i,r,n,s){for(var a=[],o=5;o<arguments.length;o++)a[o-5]=arguments[o];if(0>s)throw new Error("参数 repeatCount 不能小于0");t.$useAbleID++;var l=new egret.Timer(n);if(l.addEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),!t.idVectorFromDelayCallerHash.getObject(e)){var h=new Array;t.idVectorFromDelayCallerHash.editPair(e,h)}return t.idVectorFromDelayCallerHash.getObject(e).push(t.$useAbleID),t.idFromTimerHash.editPair(l,t.$useAbleID),t.delayCallerFromID[t.$useAbleID]=e,t.totalRunTimesFromID[t.$useAbleID]=s,t.currentRunTimesFromID[t.$useAbleID]=0,t.timerFromID[t.$useAbleID]=l,t.functionFromID[t.$useAbleID]=i.bind(r),t.paramsFromID[t.$useAbleID]=a,t.defaultDelayFromID[t.$useAbleID]=n,ActivateRunTimes.isStartUsing?t.startTimeFromID[t.$useAbleID]=ActivateRunTimes.activateTimes:t.startTimeFromID[t.$useAbleID]=egret.getTimer(),t.passTimeFromID[t.$useAbleID]=0,l.start(),t.$useAbleID},t.timerHandler=function(e){var i,r=e.currentTarget,n=t.idFromTimerHash.getObject(r),s=t.functionFromID[n],a=t.paramsFromID[n];if(t.currentRunTimesFromID[n]++,t.currentRunTimesFromID[n]>=t.totalRunTimesFromID[n]&&0!=t.totalRunTimesFromID[n]){if(t.delayCallerFromID[n]){i=t.delayCallerFromID[n];var o=t.idVectorFromDelayCallerHash.getObject(i),l=o.indexOf(n);o.splice(l,1),0==o.length&&t.idVectorFromDelayCallerHash.deletePair(i)}t.idFromTimerHash.deletePair(r),delete t.delayCallerFromID[n],delete t.timerFromID[n],delete t.currentRunTimesFromID[n],delete t.totalRunTimesFromID[n],delete t.functionFromID[n],delete t.paramsFromID[n],delete t.startTimeFromID[n],delete t.passTimeFromID[n],delete t.defaultDelayFromID[n],r.removeEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),r.stop()}else r.delay!=t.defaultDelayFromID[n]&&(r.stop(),r.delay=t.defaultDelayFromID[n],r.start());s.apply(null,a)},t.clearCallerByID=function(e){if(t.timerFromID[e]){var i=t.timerFromID[e];if(t.delayCallerFromID[e]){var r=t.delayCallerFromID[e],n=t.idVectorFromDelayCallerHash.getObject(r);if(n){var s=n.indexOf(e);n.splice(s,1),t.idVectorFromDelayCallerHash.editPair(r,n),0==n.length&&t.idVectorFromDelayCallerHash.deletePair(r)}}t.idFromTimerHash.deletePair(i),delete t.delayCallerFromID[e],delete t.timerFromID[e],delete t.currentRunTimesFromID[e],delete t.totalRunTimesFromID[e],delete t.functionFromID[e],delete t.paramsFromID[e],delete t.startTimeFromID[e],delete t.passTimeFromID[e],delete t.defaultDelayFromID[e],i.removeEventListener(egret.TimerEvent.TIMER,t.timerHandler,t),i.stop()}},t.pauseCallerByID=function(e){if(t.timerFromID[e]){var i=t.timerFromID[e];i.running&&(ActivateRunTimes.isStartUsing?t.passTimeFromID[e]=ActivateRunTimes.activateTimes-t.startTimeFromID[e]:trace("ActivateRunTimes.start() 未被启用，无法计算中继时间"),i.stop())}},t.resumeCallerByID=function(e,i){if(void 0===i&&(i=!0),t.timerFromID[e]){var r=t.timerFromID[e];r.running||(i&&(ActivateRunTimes.isStartUsing?r.delay>t.passTimeFromID[e]?r.delay-=t.passTimeFromID[e]:r.delay=0:trace("ActivateRunTimes.start() 未被启用，无法计算中继时间")),t.startTimeFromID[e]=ActivateRunTimes.activateTimes,r.start())}},t.clearCallerAt=function(e){if(t.idVectorFromDelayCallerHash.getObject(e)){var i=t.idVectorFromDelayCallerHash.getObject(e).concat();for(var r in i)t.clearCallerByID(i[r])}},t.pauseCallerAt=function(e){if(t.idVectorFromDelayCallerHash.getObject(e)){var i=t.idVectorFromDelayCallerHash.getObject(e);for(var r in i)t.pauseCallerByID(i[r])}},t.resumeCallerAt=function(e,i){if(void 0===i&&(i=!0),t.idVectorFromDelayCallerHash.getObject(e)){var r=t.idVectorFromDelayCallerHash.getObject(e);for(var n in r)t.resumeCallerByID(r[n],i)}},t.clearAllCallers=function(){var e=t.idFromTimerHash.getObjectListCopy();for(var i in e)t.clearCallerByID(e[i]);t.$useAbleID=0},t.pauseAllCallers=function(){var e=t.idFromTimerHash.getObjectListCopy();for(var i in e)t.pauseCallerByID(e[i])},t.resumeAllCallers=function(e){void 0===e&&(e=!0);var i=t.idFromTimerHash.getObjectListCopy();for(var r in i)t.resumeCallerByID(i[r],e)},t.hasDelayCaller=function(e){for(var i in t.delayCallerFromID)if(t.delayCallerFromID[i]==e)return!0;return!1},e(t,"delayCallerList",function(){var e=new Array;for(var i in t.delayCallerFromID)e.push(t.delayCallerFromID[i]);return 0==e.length?null:e}),e(t,"callerIDList",function(){var e=t.idFromTimerHash.getObjectListCopy();return 0==e.length?null:e}),t.idVectorFromDelayCallerHash=new HashMap,t.delayCallerFromID=new Object,t.idFromTimerHash=new HashMap,t.timerFromID=new Object,t.functionFromID=new Object,t.totalRunTimesFromID=new Object,t.currentRunTimesFromID=new Object,t.paramsFromID=new Object,t.startTimeFromID=new Object,t.passTimeFromID=new Object,t.defaultDelayFromID=new Object,t.$useAbleID=0,t}();egret.registerClass(TimerDelayCaller,"TimerDelayCaller");var game;!function(t){var e;!function(t){var e=function(){function t(t){this.hit="t",this.dice=t,this.dice.anchorOffsetX=this.dice.width/2,this.dice.anchorOffsetY=this.dice.height/2}var e=(__define,t),i=e.prototype;return i.playTo=function(t,e){this.dice.gotoAndStop(Math.ceil(6*Math.random())),this.last_x=this.dice.x,this.last_y=this.dice.y,this.reboundTimes=0,this.totalTimes=2+Math.round(Math.random()),310>e?e=310:e>425&&(e=425),520>t?t=this.getXByY(e)[0]:t>771&&(t=this.getXByY(e)[1]),this.lastFrame_x=t+this.dice.scaleWidth/2,this.lastFrame_y=e+this.dice.scaleHeight/2;var i=new egret.Point(t+this.dice.scaleWidth/2,e+this.dice.scaleHeight/2),r=new egret.Point(this.dice.x,this.dice.y);this.duration=1.2*egret.Point.distance(i,r);var n=Math.random()>0?-(360+180*Math.random()):360+180*Math.random();egret.Tween.get(this.dice).to({x:t+this.dice.scaleWidth/2,y:e+this.dice.scaleHeight/2,rotation:n},this.duration).call(this.onTweenComplete,this)},i.onTweenComplete=function(t){void 0===t&&(t="normal"),this.reboundTimes++,this.tweenToNextPosition()},i.tweenToNextPosition=function(){this.dice.gotoAndStop(Math.ceil(6*Math.random()));var t,e,i=this.dice.x-this.dice.scaleWidth/2,r=this.dice.y-this.dice.scaleHeight/2;switch(this.reboundTimes){case 1:this.xs=2;break;case 2:this.xs=3.5+.5*Math.random();break;case 3:this.xs=4+.5*Math.random();break;case 4:this.xs=4.5+.5*Math.random();break;case 5:this.xs=5+.5*Math.random();break;default:this.xs=6+.5*Math.random()}var n=360+360*Math.random();if(this.reboundTimes>this.totalTimes&&(i>580&&710>i||r>340&&395>r)){do{var s=Math.floor(localData.GlobalData.positionArray.length*Math.random()),i=localData.GlobalData.positionArray[s].x,r=localData.GlobalData.positionArray[s].y;t=new egret.Point(i+this.dice.scaleWidth/2,r+this.dice.scaleHeight/2),e=new egret.Point(this.dice.x,this.dice.y)}while(!this.checkPosition(t));localData.GlobalData.positionArray.splice(s,1),this.duration=egret.Point.distance(t,e)*this.xs*2;var a;a=t.x>e.x?720:-360,s=Math.floor(localData.GlobalData.resultArray.length*Math.random());var o=Number(localData.GlobalData.resultArray[s]);localData.GlobalData.resultArray.splice(s,1),this.dice.gotoAndStop(o),this.dice.rotation=180,egret.Tween.get(this.dice).to({x:i+this.dice.scaleWidth/2,y:r+this.dice.scaleHeight/2,rotation:a},this.duration,egret.Ease.sineOut).call(this.stop,this)}else this.reboundTimes>=5&&(this.dice.y<=325?(this.hit="t",this.dice.x>this.last_x?this.hit="r":this.hit="l"):this.dice.y>425&&(this.dice.x>this.last_x?this.hit="r":this.hit="l")),"t"==this.hit?(i=Math.round(this.dice.x-this.dice.scaleWidth/2-(this.last_x-this.dice.x)*(.8+.2*Math.random())),r=425,this.hit="b",this.last_x>this.dice.x?this.checkHitPoint(i,r)||(this.hit="l"):this.checkHitPoint(i,r)||(this.hit="r"),t=new egret.Point(i+this.dice.scaleWidth/2,r+this.dice.scaleHeight/2),e=new egret.Point(this.dice.x,this.dice.y),this.duration=egret.Point.distance(t,e)*this.xs,t.x<e.x&&(n*=-1),egret.Tween.get(this.dice,{onChange:this.upDataHandler,onChangeObj:this}).to({x:i+this.dice.scaleWidth/2,y:r+this.dice.scaleHeight/2,rotation:this.dice.rotation+n},this.duration).call(this.onTweenComplete,this)):"b"==this.hit?(i=Math.round(this.dice.x-this.dice.scaleWidth/2-(this.last_x-this.dice.x)*(.8+.2*Math.random())),r=310,this.hit="t",this.last_x>this.dice.x?this.checkHitPoint(i,r)||(this.hit="l"):this.checkHitPoint(i,r)||(this.hit="r"),t=new egret.Point(i+this.dice.scaleWidth/2,r+this.dice.scaleHeight/2),e=new egret.Point(this.dice.x,this.dice.y),this.duration=egret.Point.distance(t,e)*this.xs,t.x<e.x&&(n*=-1),egret.Tween.get(this.dice,{onChange:this.upDataHandler,onChangeObj:this}).to({x:i+this.dice.scaleWidth/2,y:r+this.dice.scaleHeight/2,rotation:this.dice.rotation+n},this.duration).call(this.onTweenComplete,this)):"l"==this.hit?(this.hit="r",this.dice.y>this.last_y?(this.hit="b",r=425,i=620+100*Math.random()):(this.hit="t",r=310,i=620+100*Math.random()),this.dice.x=this.lastFrame_x,t=new egret.Point(i+this.dice.scaleWidth/2,r+this.dice.scaleHeight/2),e=new egret.Point(this.dice.x,this.dice.y),t.x<e.x&&(n*=-1),this.duration=egret.Point.distance(t,e)*this.xs,egret.Tween.get(this.dice,{onChange:this.upDataHandler,onChangeObj:this}).to({x:i+this.dice.scaleWidth/2,y:r+this.dice.scaleHeight/2,rotation:this.dice.rotation+n},this.duration).call(this.onTweenComplete,this)):"r"==this.hit&&(i=620+100*Math.random(),this.hit="l",this.dice.y>this.last_y?(this.hit="b",r=425):(this.hit="t",r=310),this.dice.x=this.lastFrame_x,t=new egret.Point(i+this.dice.scaleWidth/2,r+this.dice.scaleHeight/2),e=new egret.Point(this.dice.x,this.dice.y),t.x<e.x&&(n*=-1),this.duration=egret.Point.distance(t,e)*this.xs,a=t.x>e.x?720:-360,egret.Tween.get(this.dice,{onChange:this.upDataHandler,onChangeObj:this}).to({x:i+this.dice.scaleWidth/2,y:r+this.dice.scaleHeight/2,rotation:this.dice.rotation+n},this.duration).call(this.onTweenComplete,this)),this.last_x=this.dice.x,this.last_y=this.dice.y},i.checkPosition=function(t){var e=t.x-this.dice.scaleWidth/2,i=t.y-this.dice.scaleHeight/2;return!(this.last_x<this.dice.x&&e<this.dice.x&&"r"!=this.hit||this.last_x>this.dice.x&&e>this.dice.x&&"l"!=this.hit||this.last_y<this.dice.y&&i<this.dice.y&&"b"!=this.hit||this.last_y>this.dice.y&&i>this.dice.y&&"t"!=this.hit)},i.upDataHandler=function(){this.lastFrame_x=this.dice.x,this.lastFrame_y=this.dice.y,this.checkHitPoint(Math.round(this.dice.x-this.dice.scaleWidth/2),Math.round(this.dice.y-this.dice.scaleHeight/2))||(egret.Tween.removeTweens(this.dice),this.onTweenComplete("abnormal"))},i.checkHitPoint=function(t,e){if(497>t)return!1;if(t>793)return!1;if(310>e)return!1;if(e>425)return!1;var i,r;if(t>=497&&520>=t){if(i=Math.abs((e-425)/(t-497)),r=Math.abs(-5),i>r)return!1}else if(t>=770&&793>=t&&(i=Math.abs((e-425)/(t-793)),r=Math.abs(5),i>r))return!1;return!0},i.stop=function(){this.dice.dispatchEvent(new egret.Event("DICE_STOP",(!0)))},i.getXByY=function(t){310>t?t=310:t>425&&(t=425);var e=497+(425-t)/5,i=793-(425-t)/5;return[e,i]},t}();t.DiceProxy=e,egret.registerClass(e,"game.actionProxy.DiceProxy")}(e=t.actionProxy||(t.actionProxy={}))}(game||(game={}));var DataRequester=function(){function t(){}var e=(__define,t);return e.prototype,t.getData=function(){InitConfig.isRelease?connect.NetworkConnector.connectToURL(InitConfig.req_host+"jsk3/ajax?ajaxHandler=Getjsk3AwardData&t="+Math.random(),this.onGetData,this):connect.NetworkConnector.connectToURL("localData.json",this.onGetData,this)},t.getHistory=function(){InitConfig.isRelease?connect.NetworkConnector.connectToURL(InitConfig.req_host+"jsk3/ajax?ajaxHandler=GetJsk3AnalysisData&t="+Math.random(),this.onGetHistory,this):connect.NetworkConnector.connectToURL("history.json",this.onGetHistory,this)},t.onGetData=function(t){if(t==connect.NetworkConnector.CONNECT_FAULT)return void(this.dataRequestTimes<10?(egret.setTimeout(this.getData,this,500),this.dataRequestTimes++,trace("reconnect  "+this.dataRequestTimes)):(ConcreteSubject.notify(SubjectTypes.LINK_FAULT),trace("多次访问服务器失败，请检查网络链接并手动刷新页面!")));try{var e=JSON.parse(t)}catch(i){return trace("JSON数据解析异常，重新请求数据!"),void this.getData()}this.dataRequestTimes=0;var r=localData.Cache.data;r.time=e.time,r.current.periodNumber=e.current.periodNumber,r.current.awardTime=e.current.awardTime,r.current.awardNumbers=e.current.awardNumbers,r.next.periodNumber=e.next.periodNumber,r.next.awardTime=e.next.awardTime,r.next.awardTimeInterval=e.next.awardTimeInterval,r.next.delayTimeInterval=e.next.delayTimeInterval,ConcreteSubject.notify(SubjectTypes.GET_DATA)},t.onGetHistory=function(t){if(t==connect.NetworkConnector.CONNECT_FAULT)return void(this.historyRequestTimes<10?(egret.setTimeout(this.getHistory,this,500),this.historyRequestTimes++,trace("reconnect  "+this.historyRequestTimes++)):(ConcreteSubject.notify(SubjectTypes.LINK_FAULT),trace("多次访问服务器失败，请检查网络链接并手动刷新页面!")));try{var e=JSON.parse(t)}catch(i){return trace("JSON数据解析异常，重新请求数据!"),void this.getHistory()}this.historyRequestTimes=0;var r=localData.Cache.data;r.time=e.time,r.drawHistories=e.drawHistories,r.numberStatistics=e.numberStatistics,ConcreteSubject.notify(SubjectTypes.GET_HISTORY)},t.dataRequestTimes=0,t.historyRequestTimes=0,t}();egret.registerClass(DataRequester,"DataRequester");var game;!function(t){var e=function(e){function i(){e.call(this),this.subscribe(SubjectTypes.OVER_TIME,this.onOverTime),this.addEvents(),this.buildView()}__extends(i,e);var r=(__define,i),n=r.prototype;return n.subscribe=function(t,e,i){void 0===i&&(i=this),ConcreteSubject.addObserver(this,t,e,i)},n.unsubscribe=function(t){void 0===t&&(t=null),ConcreteSubject.removeObserver(this,t)},n.onOverTime=function(){this.init()},n.addEvents=function(){this.subscribe(SubjectTypes.GET_DATA,this.onGetData,this)},n.buildView=function(){var e=new egret.Shape;this.sprite=new egret.Sprite,e.graphics.beginFill(16711680,.5),e.graphics.moveTo(519,309),e.graphics.lineTo(496,426),e.graphics.lineTo(794,426),e.graphics.lineTo(771,309),e.graphics.endFill(),trace(e.alpha),e.alpha=.01,this.sprite.addChildAt(e,0),this.tz1=new displayLite.AnimationLite("point",1,6,1,(!1)),this.tz2=new displayLite.AnimationLite("point",1,6,1,(!1)),this.tz3=new displayLite.AnimationLite("point",1,6,1,(!1)),this.tz1.x=595,this.tz1.y=210,this.tz2.x=615,this.tz2.y=198,this.tz3.x=635,this.tz3.y=210,this.tz1Proxy=new t.actionProxy.DiceProxy(this.tz1),this.tz2Proxy=new t.actionProxy.DiceProxy(this.tz2),this.tz3Proxy=new t.actionProxy.DiceProxy(this.tz3),this.sprite.addChild(this.tz2),this.sprite.addChild(this.tz1),this.sprite.addChild(this.tz3),this.tz1.scaleX=this.tz1.scaleY=.25,this.tz2.scaleX=this.tz2.scaleY=.25,this.tz3.scaleX=this.tz3.scaleY=.25,this.diceArray=[this.tz1,this.tz2,this.tz3];for(var i=0;19>i;i++)this["ghost"+i]=new egret.Point;this.ghost0.x=570,this.ghost0.y=330,this.ghost1.x=730,this.ghost1.y=330,this.ghost2.x=555,this.ghost2.y=410,this.ghost3.x=745,this.ghost3.y=410,this.ghost4.x=600,this.ghost4.y=340,this.ghost5.x=630,this.ghost5.y=350,this.ghost6.x=660,this.ghost6.y=370,this.ghost7.x=685,this.ghost7.y=390,this.ghost8.x=710,this.ghost8.y=405,this.ghost9.x=710,this.ghost9.y=360,this.ghost10.x=685,this.ghost10.y=340,this.ghost11.x=650,this.ghost11.y=320,this.ghost12.x=745,this.ghost12.y=370,this.ghost13.x=565,this.ghost13.y=357,this.ghost14.x=585,this.ghost14.y=385,this.ghost15.x=545,this.ghost15.y=380,this.ghost16.x=615,this.ghost16.y=385,this.ghost17.x=594,this.ghost17.y=412,this.ghost18.x=653,this.ghost18.y=400,this.tz1Proxy.range=e,this.tz2Proxy.range=e,this.tz3Proxy.range=e,this.addChild(this.sprite)},n.init=function(){this.tz1.x=595+this.tz1.scaleWidth/2,this.tz1.y=210+this.tz1.scaleHeight/2,this.tz2.x=615+this.tz1.scaleWidth/2,this.tz2.y=198+this.tz1.scaleHeight/2,this.tz3.x=635+this.tz1.scaleWidth/2,this.tz3.y=210+this.tz1.scaleHeight/2,this.tz1.rotation=0,this.tz2.rotation=0,this.tz3.rotation=0,this.removeEventListener(egret.Event.ENTER_FRAME,this.stepHandler,this)},n.showResult=function(){this.onGetData()},n.onGetData=function(){var t=localData.Cache.data.current.awardNumbers.split(",");this.tz1.gotoAndStop(parseInt(t[0])),this.tz2.gotoAndStop(parseInt(t[1])),this.tz3.gotoAndStop(parseInt(t[2]))},n.play=function(){localData.GlobalData.positionArray=new Array;for(var t=0;19>t;t++)localData.GlobalData.positionArray.push(new egret.Point(this["ghost"+t].x,this["ghost"+t].y));var e,i=425-200*Math.random();i>425?(e=597+50*Math.random(),this.tz1Proxy.hit="b"):(e=this.getXByY(i)[0],this.tz1Proxy.hit="l");var r=425,n=Math.random()>.5?520+50*Math.random():650+50*Math.random();this.tz2Proxy.hit="b";var s,a=555-200*Math.random();a>425?(s=793-100*Math.random(),this.tz3Proxy.hit="b"):(s=this.getXByY(a)[1],this.tz3Proxy.hit="r"),this.tz1Proxy.playTo(e,i),this.tz2Proxy.playTo(n,r),this.tz3Proxy.playTo(s,a),this.addEventListener(egret.Event.ENTER_FRAME,this.stepHandler,this)},n.stepHandler=function(t){this.diceArray.sort(function(t,e){return t.y>e.y?1:-1}),this.sprite.addChild(this.diceArray[0]),this.sprite.addChild(this.diceArray[1]),this.sprite.addChild(this.diceArray[2])},n.setPosition=function(t,e,i){t.x=e,t.y=i},n.getXByY=function(t){310>t?t=310:t>425&&(t=425);var e=497+(425-t)/5,i=793-(425-t)/5;return[e,i]},i}(egret.Sprite);t.DiceBox=e,egret.registerClass(e,"game.DiceBox",["IObserver"])}(game||(game={}));var game;!function(t){var e=function(e){function i(){e.call(this),this.isInit=!1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.subscribe(SubjectTypes.LINK_FAULT,this.linkFault),this.subscribe(SubjectTypes.OVER_TIME,this.onOverTime)}__extends(i,e);var r=(__define,i),n=r.prototype;return n.subscribe=function(t,e,i){void 0===i&&(i=this),ConcreteSubject.addObserver(this,t,e,i)},n.unsubscribe=function(t){void 0===t&&(t=null),ConcreteSubject.removeObserver(this,t)},n.linkFault=function(){this.unsubscribe(),clearTimeout(this.forceFinishID),clearInterval(this.forceFinishID),clearInterval(this.internalID),clearTimeout(this.initID),clearInterval(this.timeID)},n.onOverTime=function(){this.isInit=!1,this.addEvents(),this.init()},n.onAdded=function(){this.buildView(),this.addEvents(),this.init()},n.buildView=function(){var e=new egret.Bitmap;e.texture=RES.getRes("bgImage"),this.stage.addChildAt(e,0);var i=new egret.Bitmap,r=new egret.Bitmap,n=new egret.Bitmap;this.diceBox=new t.DiceBox,r.texture=RES.getRes("boxBottom"),i.texture=RES.getRes("boxFront"),n.texture=RES.getRes("urlLogo"),r.x=472.6,r.y=157,n.x=580,n.y=400,i.x=482,i.y=252,this.tzj_mc=new displayLite.AnimationLite("tzj_",0,136,0,(!1)),this.tzj_mc.x=580,this.tzj_mc.y=167,this.tzj_mc.addFrameScript(0,function(){this.dispatchEvent(new egret.Event("dispatch_frame0",(!0)))},!0),this.tzj_mc.addFrameScript(136,function(){this.dispatchEvent(new egret.Event("dispatch_frame137",(!0)))},!0),this.moni_btn=new displayLite.ButtonLite("moni_normal","moni_press","moni_forbidden"),this.addChild(this.moni_btn),this.moni_btn.x=565,this.moni_btn.y=498,this.clock_mc=new egret.TextField,this.clock_mc.textColor=16711680,this.clock_mc.size=40,this.clock_mc.width=200,this.clock_mc.textAlign=egret.HorizontalAlign.CENTER,this.clock_mc.x=555,this.clock_mc.y=360,this.addChild(r),this.addChild(this.tzj_mc),this.addChild(this.diceBox),this.addChild(i),this.addChild(this.clock_mc)},n.onChange=function(){trace(this.stage.stageWidth,this.stage.stageHeight)},n.addEvents=function(){this.moni_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moniHandler,this),this.addEventListener("dispatch_frame1",this.onFrame1,this),this.addEventListener("dispatch_frame137",this.onFrame137,this),this.addEventListener("DICE_STOP",this.onDiceStop,this),ConcreteSubject.hasObserverAndSubjectType(this,SubjectTypes.GET_DATA)||this.subscribe(SubjectTypes.GET_DATA,this.onGetData,this)},n.onFrame1=function(){this.tzj_mc.stop()},n.onFrame137=function(){this.tzj_mc.stop()},n.init=function(){clearTimeout(this.forceFinishID),clearInterval(this.forceFinishID),clearInterval(this.internalID),clearTimeout(this.initID),this.internalID=setInterval(this.timerHandler.bind(this),1e3),this.diceBox.init(),this.tzj_mc.gotoAndStop(1),this.moni_btn.touchEnabled=!0,this.stopCount=0,this.clock_mc.visible=!0,localData.GlobalData.awardStatus=0,localData.GlobalData.timeInterval<20&&(this.moni_btn.touchEnabled=!1),localData.GlobalData.awardStatus<2&&this.tzj_mc.gotoAndStop(133-localData.GlobalData.timeInterval/(600/132)),this.isInit&&(egret.Tween.removeAllTweens(),ConcreteSubject.notify(SubjectTypes.GAME_INIT),TimerDelayCaller.clearCallerAt("getHistory"),DataRequester.getHistory(),TimerDelayCaller.addCallerOnce("getHistory",DataRequester.getHistory,DataRequester,1e4),TimerDelayCaller.addCallerOnce("getHistory",DataRequester.getHistory,DataRequester,2e4),TimerDelayCaller.addCallerOnce("getHistory",DataRequester.getHistory,DataRequester,3e4)),clearTimeout(this.initID),clearInterval(this.timeID)},n.onGetData=function(){localData.GlobalData.timeInterval=Math.floor(parseInt(localData.Cache.data.next.awardTimeInterval)/1e3)+parseInt(localData.Cache.data.next.delayTimeInterval),this.isInit||(localData.GlobalData.timeInterval<10&&(localData.GlobalData.timeInterval=10,localData.GlobalData.awardStatus=1),this.isInit=!0,localData.GlobalData.awardStatus<2&&this.tzj_mc.gotoAndStop(133-localData.GlobalData.timeInterval/(600/132))),localData.GlobalData.timeInterval<20&&(this.moni_btn.touchEnabled=!1),this.clock_mc.text=localData.GlobalData.timeInterval.toString(),2==localData.GlobalData.awardStatus&&parseInt(localData.Cache.data.next.awardTimeInterval)>0&&(clearInterval(this.timeID),3==localData.GlobalData.awardStatus,localData.GlobalData.resultArray=localData.Cache.data.current.awardNumbers.split(","),localData.GlobalData.isActivate?(this.tzj_mc.gotoAndPlay(134),this.diceBox.play(),esm.SoundEffectManager.stopAllSound(),TimerDelayCaller.addCallerOnce(null,esm.SoundEffectManager.playSound,esm.SoundEffectManager,200,SoundNames.PLAYING)):(this.init(),this.diceBox.showResult()))},n.forceFinish=function(){clearTimeout(this.forceFinishID)},n.unInit=function(){clearTimeout(this.forceFinishID),clearInterval(this.forceFinishID)},n.finishByDeActivate=function(){localData.GlobalData.isActivate||(this.init(),DataRequester.getHistory(),this.diceBox.showResult())},n.moniHandler=function(){this.moni_btn.touchEnabled=!1,localData.GlobalData.isSimulation=!0,this.tzj_mc.gotoAndPlay(134),TimerDelayCaller.addCallerOnce(null,esm.SoundEffectManager.playSound,esm.SoundEffectManager,200,SoundNames.PLAYING),localData.GlobalData.awardStatus=2,localData.GlobalData.resultArray=new Array,localData.GlobalData.resultArray.push(Math.ceil(6*Math.random()).toString()),localData.GlobalData.resultArray.push(Math.ceil(6*Math.random()).toString()),localData.GlobalData.resultArray.push(Math.ceil(6*Math.random()).toString()),this.diceBox.play(),this.clock_mc.visible=!1},n.onDiceStop=function(t){this.stopCount++,3==this.stopCount&&(TimerDelayCaller.addCallerOnce(null,this.init,this,2500),egret.Tween.removeAllTweens())},n.timerHandler=function(){localData.GlobalData.timeInterval-=1,localData.GlobalData.awardStatus<2&&this.tzj_mc.gotoAndStop(133-localData.GlobalData.timeInterval/(600/132)),this.clock_mc.text=localData.GlobalData.timeInterval.toString(),localData.GlobalData.timeInterval<20?this.moni_btn.touchEnabled=!1:0==localData.GlobalData.awardStatus&&(this.moni_btn.touchEnabled=!0),(20==localData.GlobalData.timeInterval||10==localData.GlobalData.timeInterval)&&TimerDelayCaller.clearCallerAt("getHistory"),localData.GlobalData.timeInterval<10&&localData.GlobalData.timeInterval>-1&&2!=localData.GlobalData.awardStatus&&esm.SoundEffectManager.playSound(SoundNames.SECONDS),localData.GlobalData.timeInterval<0&&(this.clock_mc.visible=!1,localData.GlobalData.isSimulation=!1,localData.GlobalData.timeInterval=0,localData.GlobalData.awardStatus=2,clearInterval(this.internalID),this.timeID=setInterval(this.requestNewData.bind(this),2e3))},n.requestNewData=function(){DataRequester.getData()},i}(egret.DisplayObjectContainer);t.GameView=e,egret.registerClass(e,"game.GameView",["IObserver"])}(game||(game={}));var game;!function(t){var e=function(t){function e(){t.call(this),this.buildView(),this.addEvents()}__extends(e,t);var i=(__define,e),r=i.prototype;return r.subscribe=function(t,e,i){void 0===i&&(i=this),ConcreteSubject.addObserver(this,t,e,i)},r.unsubscribe=function(t){void 0===t&&(t=null),ConcreteSubject.removeObserver(this,t)},r.buildView=function(){this.dice1=new egret.Bitmap,this.dice2=new egret.Bitmap,this.dice3=new egret.Bitmap;var t,e;for(t=0;8>t;t++)e=new egret.TextField,e.name="lsNo_"+t,e.size=16,e.width=100,e.textColor=16776960,e.x=32,e.y=344+24*t,this.addChild(e),e=new egret.TextField,e.name="lsPeriod_"+t,e.size=16,e.width=50,e.textColor=16777215,e.x=157,e.y=344+24*t,this.addChild(e),e=new egret.TextField,e.name="lsTotal_"+t,e.size=16,e.width=30,e.textColor=65535,e.x=229,e.y=344+24*t,this.addChild(e),e=new egret.TextField,e.name="lsdx_"+t,e.size=16,e.width=60,e.textColor=16776960,e.x=265,e.y=344+24*t,this.addChild(e);for(t=1;7>t;t++)e=new egret.TextField,e.name="lrNo_"+t,e.size=16,e.width=55,e.textColor=16776960,e.text=t.toString(),this.addChild(e),e=new egret.TextField,e.name="lrTime_"+t,e.size=16,e.width=55,e.textColor=16777215,this.addChild(e);for(this.getChildByName("lrNo_1").x=23,this.getChildByName("lrNo_1").y=187,this.getChildByName("lrNo_2").x=23,this.getChildByName("lrNo_2").y=211,this.getChildByName("lrNo_3").x=23,this.getChildByName("lrNo_3").y=236,this.getChildByName("lrNo_4").x=172,this.getChildByName("lrNo_4").y=187,this.getChildByName("lrNo_5").x=172,this.getChildByName("lrNo_5").y=211,this.getChildByName("lrNo_6").x=172,this.getChildByName("lrNo_6").y=236,t=1;7>t;t++)4>t?this.getChildByName("lrTime_"+t).x=this.getChildByName("lrNo_"+t).x+72:this.getChildByName("lrTime_"+t).x=this.getChildByName("lrNo_"+t).x+75,this.getChildByName("lrTime_"+t).y=this.getChildByName("lrNo_"+t).y;for(e=new egret.TextField,e.name="lrxiao",e.text="小",e.size=16,e.width=55,this.addChild(e),e.x=23,e.y=259,e.textColor=65280,e=new egret.TextField,e.name="lrda",e.text="大",e.size=16,e.width=55,this.addChild(e),e.x=172,e.y=259,e.textColor=16711680,e=new egret.TextField,e.name="lrxiaoNum",e.size=16,e.width=55,this.addChild(e),e.x=95,e.y=259,e.textColor=65535,e=new egret.TextField,e.name="lrdaNum",e.size=16,e.width=55,this.addChild(e),e.x=247,e.y=259,e.textColor=65535,e=new egret.TextField,e.name="sq_txt",e.size=20,e.width=140,e.textColor=16776960,e.x=248,e.y=9,this.addChild(e),e=new egret.TextField,e.name="hz_txt",e.size=22,e.width=60,e.textColor=65535,e.x=588,e.y=22,this.addChild(e),e=new egret.TextField,e.name="dx_txt",e.size=22,e.width=60,e.textColor=65535,e.x=588,e.y=60,this.addChild(e),e=new egret.TextField,e.name="xq_txt",e.size=20,e.width=140,e.textColor=16776960,e.x=768,e.y=24,this.addChild(e),e=new egret.TextField,e.name="sj_txt",e.size=20,e.width=100,e.textColor=16711680,e.x=768,e.y=63,this.addChild(e),t=0;t<this.numChildren;t++)if(this.getChildAt(t)instanceof egret.TextField){var i=this.getChildAt(t);i.textAlign=egret.HorizontalAlign.CENTER,i.fontFamily="Microsoft YaHei"}i=this.getChildByName("xq_txt"),i.textAlign=egret.HorizontalAlign.LEFT,i=this.getChildByName("sj_txt"),i.textAlign=egret.HorizontalAlign.LEFT,this.btnClose=new displayLite.ButtonLite("SoundBtn000"),this.btnOpen=new displayLite.ButtonLite("SoundBtn001"),this.btnClose.scaleX=this.btnClose.scaleY=1.5,this.btnOpen.scaleX=this.btnOpen.scaleY=1.5,this.btnClose.x=920,this.btnClose.y=20,this.btnOpen.x=920,this.btnOpen.y=20,this.addChild(this.btnClose),this.addChild(this.btnOpen),this.btnClose.touchEnabled=!0,this.btnOpen.touchEnabled=!0,this.btnOpen.visible=!1,esm.SoundEffectManager.isOpen=!1},r.addEvents=function(){this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.btnOpen.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},r.onTouch=function(t){switch(t.currentTarget){case this.btnClose:this.btnClose.visible=!1,this.btnOpen.visible=!0,esm.SoundEffectManager.isOpen=!0,this.isInitSound||(this.isInitSound=!0,esm.SoundEffectManager.playSound(SoundNames.SECONDS,0,1),esm.SoundEffectManager.playSound(SoundNames.PLAYING,0,1),esm.SoundEffectManager.stopAllSound());break;case this.btnOpen:this.btnClose.visible=!0,this.btnOpen.visible=!1,esm.SoundEffectManager.isOpen=!1}},r.getData=function(){if(trace("getData"),!this.dice1.parent){var t=new egret.Sprite;t.addChild(this.dice1),t.addChild(this.dice2),t.addChild(this.dice3),this.dice2.x=74,this.dice3.x=148,t.x=270,t.y=35,t.scaleX=t.scaleY=.85,this.addChild(t)}var e=localData.Cache.data,i=e.current.awardNumbers.split(",");this.dice1.texture=RES.getRes("p"+i[0]),this.dice2.texture=RES.getRes("p"+i[1]),this.dice3.texture=RES.getRes("p"+i[2]);var r;r=this.getChildByName("sq_txt"),r.text=e.current.periodNumber;var r,n=e.current.awardNumbers.split(",");r=this.getChildByName("hz_txt");var s=parseInt(n[0])+parseInt(n[1])+parseInt(n[2]);r.text=s.toString();var r;r=this.getChildByName("dx_txt"),parseInt(n[0])==parseInt(n[1])&&parseInt(n[0])==parseInt(n[2])?(r.text="通吃",r.textColor=13369599):11>s?(r.text="小",r.textColor=65280):(r.text="大",r.textColor=16711680),r=this.getChildByName("xq_txt"),r.text=e.next.periodNumber,r=this.getChildByName("sj_txt"),r.text=e.next.awardTime.split(" ")[1]},r.getHistory=function(){trace("getHistory");for(var t,e=1;7>e;e++)t=this.getChildByName("lrTime_"+e),t.text=localData.Cache.data.numberStatistics[e-1].count.toString();for("小"==localData.Cache.data.numberStatistics[7].number?(t=this.getChildByName("lrxiaoNum"),t.text=localData.Cache.data.numberStatistics[7].count.toString(),t=this.getChildByName("lrdaNum"),t.text=localData.Cache.data.numberStatistics[6].count.toString()):(t=this.getChildByName("lrdaNum"),t.text=localData.Cache.data.numberStatistics[7].count.toString(),t=this.getChildByName("lrxiaoNum"),t.text=localData.Cache.data.numberStatistics[6].count.toString()),e=0;8>e;e++){t=this.getChildByName("lsNo_"+e),t.text=localData.Cache.data.drawHistories[e].periodNumber.toString(),t=this.getChildByName("lsPeriod_"+e);var i=localData.Cache.data.drawHistories[e].numbers.toString().split(",");i.sort(function(t,e){return parseInt(t)>parseInt(e)?1:-1}),t.text=i[0]+","+i[1]+","+i[2],t=this.getChildByName("lsTotal_"+e),t.text=localData.Cache.data.drawHistories[e].total.toString(),t=this.getChildByName("lsdx_"+e);var r=localData.Cache.data.drawHistories[e].result;"小"==r?t.textColor=65280:"大"==r?t.textColor=16711680:"通吃"==r&&(t.textColor=13369599),t.text=r}},r.reSetInfo=function(){var t=localData.Cache.data,e=t.current.awardNumbers.split(",");this.dice1.texture=RES.getRes("p"+e[0]),
this.dice2.texture=RES.getRes("p"+e[1]),this.dice3.texture=RES.getRes("p"+e[2])},e}(egret.Sprite);t.InfoView=e,egret.registerClass(e,"game.InfoView",["IObserver"])}(game||(game={}));var game;!function(t){var e=function(){function e(e){this.rootContainer=e,this.gameView=new t.GameView,this.rootContainer.addChildAt(this.gameView,1),this.infoView=new t.InfoView,this.rootContainer.addChildAt(this.infoView,1),this.subscribe(SubjectTypes.LINK_FAULT,this.linkFault),this.subscribe(SubjectTypes.GET_DATA,this.onGetData),this.subscribe(SubjectTypes.GET_HISTORY,this.onGetHistory),this.subscribe(SubjectTypes.GAME_INIT,this.reSetInfo),this.subscribe(SubjectTypes.OVER_TIME,this.onOverTime),DataRequester.getData(),DataRequester.getHistory()}var i=(__define,e),r=i.prototype;return r.subscribe=function(t,e,i){void 0===i&&(i=this),ConcreteSubject.addObserver(this,t,e,i)},r.unsubscribe=function(t){void 0===t&&(t=null),ConcreteSubject.removeObserver(this,t)},r.linkFault=function(){this.unsubscribe(),this.rootContainer.dispatchEvent(new egret.Event("linkFault",(!0)))},r.onOverTime=function(){this.isInitData=!1,DataRequester.getData(),DataRequester.getHistory()},r.onGetData=function(){this.isInitData||(this.isInitData=!0,this.rootContainer.dispatchEvent(new egret.Event("enterGame",(!0))),this.infoView.getData())},r.onGetHistory=function(){this.infoView.getHistory()},r.reSetInfo=function(){this.infoView.getData()},e}();t.ViewMediator=e,egret.registerClass(e,"game.ViewMediator",["IObserver"])}(game||(game={}));var localData;!function(t){var e=function(){function t(){this.current=new Current,this.next=new Next,this.drawHistories=new Array,this.numberStatistics=new Array}var e=(__define,t);return e.prototype,t}();t.DataVauleObject=e,egret.registerClass(e,"localData.DataVauleObject")}(localData||(localData={}));var Current=function(){function t(){}var e=__define,i=t,r=i.prototype;return e(r,"awardNumbers",function(){return this.$awardNumbers},function(t){var e=t.split(",");e.sort(function(t,e){return parseInt(t)>parseInt(e)?1:-1}),this.$awardNumbers=e[0]+","+e[1]+","+e[2]}),t}();egret.registerClass(Current,"Current");var Next=function(){function t(){}var e=(__define,t);return e.prototype,t}();egret.registerClass(Next,"Next");var localData;!function(t){var e=function(){function e(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var i=(__define,e);return i.prototype,e.data=new t.DataVauleObject,e}();t.Cache=e,egret.registerClass(e,"localData.Cache")}(localData||(localData={}));var localData;!function(t){var e=function(){function t(){}var e=(__define,t);return e.prototype,t.isActivate=!0,t.isSimulation=!1,t.awardStatus=0,t}();t.GlobalData=e,egret.registerClass(e,"localData.GlobalData")}(localData||(localData={}));var InitConfig=function(){function t(){}var e=(__define,t);return e.prototype,t.res_path="",t.req_host="",t.isShowUA=!1,t.browserDescription=1,t.isShowVersion=!1,t.isRelease=!0,t}();egret.registerClass(InitConfig,"InitConfig");var SoundNames=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=(__define,t);return e.prototype,t.BG_GAME="backgroundGameMusic",t.SECONDS="soundOfSeconds",t.PLAYING="soundOfPlaying",t}();egret.registerClass(SoundNames,"SoundNames");var SubjectTypes=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=(__define,t);return e.prototype,t.APP_START="appStart",t.OVER_TIME="overTime",t.GET_DATA="getData",t.GET_HISTORY="getHistory",t.GAME_INIT="gameInit",t.LINK_FAULT="linkFault",t}();egret.registerClass(SubjectTypes,"SubjectTypes");var LoadingUI=function(t){function e(){t.call(this),this.createView(),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)}__extends(e,t);var i=(__define,e),r=i.prototype;return r.onAdded=function(t){},r.createView=function(){this.loadingBG=new egret.Bitmap,this.loadingBG.texture=RES.getRes("loadingBG"),this.addChild(this.loadingBG),this.textField=new egret.TextField,this.textField.size=20,this.textField.width=480,this.textField.x=(980-this.textField.width)/2,this.textField.y=450,this.textField.height=100,this.textField.textAlign="center",this.loadingBarBg=new egret.Bitmap,this.loadingBarBg.texture=RES.getRes("loadingBarBg"),this.loadingBarBg.x=(980-this.loadingBarBg.width)/2,this.loadingBarBg.y=445,this.addChild(this.loadingBarBg),this.loadingBar=new egret.Bitmap,this.loadingBar.texture=RES.getRes("loadingBar"),this.loadingBar.scaleX=-1,this.loadingBar.x=200,this.loadingBar.y=446,this.addChild(this.loadingBar),this.loadingBarMask=new egret.Bitmap,this.loadingBarMask.texture=RES.getRes("loadingBarMask"),this.loadingBarMask.x=(980-this.loadingBarMask.width)/2,this.loadingBarMask.y=446,this.addChild(this.loadingBarMask),this.addChild(this.textField),this.loadingBar.mask=this.loadingBarMask,this.loading=new egret.Bitmap,this.loading.texture=RES.getRes("loading"),this.addChild(this.loading),this.loading.x=(980-this.loading.width)/2,this.loading.y=300,this.reload()},r.onHide=function(){egret.Tween.get(this.loading).wait(200).to({alpha:0},500).call(this.onShow,this)},r.onShow=function(){egret.Tween.get(this.loading).wait(200).to({alpha:1},500).call(this.onHide,this)},r.setProgress=function(t,e){var i=Math.floor(t/e*100);this.textField.text=i+"%",this.loadingBar.x=200+580*i/100},r.reload=function(){this.unload(),this.loading.alpha=1,egret.Tween.get(this.loading).to({alpha:0},500).call(this.onShow,this)},r.unload=function(){egret.Tween.removeTweens(this.loading)},r.linkFault=function(){egret.Tween.removeTweens(this.loading),this.addChild(this.loadingBarBg);var t=new egret.Bitmap;t.texture=RES.getRes("linkFault"),this.addChild(t),t.x=(980-t.width)/2,t.y=310,this.textField.visible=!1,this.loading.visible=!1,this.loadingBarBg.visible=!1,this.loadingBar.visible=!1,this.loadingBarMask.visible=!1},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var TextField=egret.TextField,Main=function(t){function e(){t.call(this),this.path="",this.last_num1=NaN,this.last_num2=NaN,this.last_num3=NaN,this.sys=AboutBrowser.getInfo(),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e),r=i.prototype;return r.onAddToStage=function(t){if(this.onOrientationChange(),this.stage.addEventListener(egret.Event.ACTIVATE,this.onActivate,this),this.stage.addEventListener(egret.Event.DEACTIVATE,this.onDeActivate,this),this.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,this.onOrientationChange,this),this.stage.addEventListener("linkFault",this.onLinkFault,this),egret.Capabilities.isMobile,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(InitConfig.res_path+"resource/default.res.json",InitConfig.res_path+"resource/"),InitConfig.isShowVersion&&(this.version=new egret.TextField,this.version.bold=!1,this.version.fontFamily="Microsoft YaHei",this.version.text="ver.201603011655",this.version.size=16,this.version.y=this.stage.stageHeight-20,this.stage.addChild(this.version)),0!=InitConfig.browserDescription&&egret.Capabilities.isMobile&&(this.browserDescription=new egret.TextField,this.browserDescription.bold=!1,this.browserDescription.fontFamily="Microsoft YaHei",(1==InitConfig.browserDescription&&this.sys.isAdvise||2==InitConfig.browserDescription)&&(this.browserDescription.text=this.sys.description),this.browserDescription.size=16,this.browserDescription.y=this.stage.stageHeight-20,this.version&&(this.browserDescription.x=this.version.x+this.version.textWidth+20),this.stage.addChild(this.browserDescription)),InitConfig.isShowUA){this.userAgent=new egret.TextField;var e=navigator.userAgent;this.userAgent.size=12,this.userAgent.text=e.toString(),this.stage.addChild(this.userAgent)}this.debugInfo=new egret.TextField},r.onActivate=function(){localData.GlobalData.isActivate=!0},r.onDeActivate=function(){localData.GlobalData.isActivate=!1},r.sizeChange=function(){document.body.offsetWidth<document.body.offsetHeight?this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:this.stage.scaleMode=egret.StageScaleMode.EXACT_FIT},r.onOrientationChange=function(){var t=Number(window.orientation);0==t||180==t||document.body.offsetWidth<document.body.offsetHeight?this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:(90==t||-90==t||document.body.offsetWidth>document.body.offsetHeight)&&(this.stage.scaleMode=egret.StageScaleMode.EXACT_FIT)},r.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.loadGroup("loadingFace")},r.onResourceLoadComplete=function(t){if("loadingFace"==t.groupName){var e=document.getElementById("loadingTip");e&&(e.innerText=""),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.loadingView.reload(),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")}else"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),"Android"!=egret.Capabilities.os?(esm.SoundEffectManager.registerSound(SoundNames.SECONDS,RES.getRes("seconds"),1),esm.SoundEffectManager.registerSound(SoundNames.PLAYING,RES.getRes("playing"),1)):(esm.SoundEffectManager.registerAudio(SoundNames.SECONDS,document.getElementById("seconds"),1),esm.SoundEffectManager.registerAudio(SoundNames.PLAYING,document.getElementById("playing"),1)),egret.setTimeout(this.createGameScene,this,250));this.version&&this.stage.addChild(this.version),this.browserDescription&&this.stage.addChild(this.browserDescription),this.userAgent&&this.stage.addChild(this.userAgent)},r.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},r.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},r.createGameScene=function(){this.stage.addEventListener("enterGame",this.enterGame,this),this.viewMediator=new game.ViewMediator(this.stage),ActivateRunTimes.addCallbackBeforeStep(this,this.deviationHandler,this)},r.enterGame=function(){TimerDelayCaller.addCallerOnce(null,function(){this.loadingView.parent.removeChild(this.loadingView),this.loadingView.unload()},this,1e3),ActivateRunTimes.start(),this.version&&this.stage.addChild(this.version),this.browserDescription&&this.stage.addChild(this.browserDescription),this.userAgent&&this.stage.addChild(this.userAgent)},r.deviationHandler=function(){!isNaN(this.last_num1),ActivateRunTimes.deviationCurrentTimes>3e3&&(trace("等待超时,自动重新登入"),this.stage.addChild(this.loadingView),this.loadingView.reload(),ConcreteSubject.notify(SubjectTypes.OVER_TIME),FrameDelayCaller.clearAllCallers(),TimerDelayCaller.clearAllCallers(),esm.SoundEffectManager.stopAllSound(),egret.Tween.removeAllTweens(),clearInterval(this.timeID),ActivateRunTimes.stop())},r.onLinkFault=function(){this.stage.addChild(this.loadingView),this.loadingView.linkFault(),ActivateRunTimes.stop()},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var ConcreteSubject=function(){function t(){throw new Error(this.__class__+" 是静态成员集成类，无需实例化")}var e=(__define,t);return e.prototype,t.addObserver=function(t,e,i,r){if(null==i)throw new Error("错误：提供给 ConcreteSubject 的回调函数不能为null");if(i.length>1)throw new Error("错误：提供给 ConcreteSubject 的回调函数必须不带参数，或只带1个any类型参数，当前有"+i.length+"个参数");var n=this.getKeyByObserver(t);return"undefined"==n&&(n=this.createKeyByObserver(t)),null!=this.observerCollection[n]&&null!=this.observerCollection[n][e]?void console.log("提示：观察者 "+(t.__class__||t.__type__||typeof t)+" 已经订阅过此主题类型:  "+e+"，此次重复订阅无效"):(null==this.observerCollection[n]&&(this.observerCollection[n]={}),this.observerCollection[n][e]=i,null==this.callBackFunctionsArrayCollection[e]&&(this.callBackFunctionsArrayCollection[e]=new Array),this.callBackFunctionsArrayCollection[e].push(i.bind(r)),null==this.subjectTypeCollection[e]&&(this.subjectTypeCollection[e]=new Array),void this.subjectTypeCollection[e].push(t))},t.removeObserver=function(t,e){void 0===e&&(e=null);var i=this.getKeyByObserver(t);if("undefined"==i)return void console.log("提示：观察者 "+(t.__class__||t.__type__||typeof t)+" 目前并未订阅任何主题类型，此次取消订阅无效");var r;if(null==e||""==e){for(var n in this.observerCollection[i])r=this.callBackFunctionsArrayCollection[n].indexOf(this.observerCollection[i][n]),this.callBackFunctionsArrayCollection[n].splice(r,1),delete this.observerCollection[i][n],r=this.subjectTypeCollection[n].indexOf(t),this.subjectTypeCollection[n].splice(r,1),0==this.subjectTypeCollection[n].length&&delete this.subjectTypeCollection[n];delete this.observerCollection[i]}else{if(null==this.observerCollection[i][e])return void console.log("提示：观察者 "+(t.__class__||t.__type__||typeof t)+" 目前并未订阅此主题类型 "+e+"，此次取消订阅无效");r=this.callBackFunctionsArrayCollection[e].indexOf(this.observerCollection[i][e]),this.callBackFunctionsArrayCollection[e].splice(r,1),delete this.observerCollection[i][e],r=this.subjectTypeCollection[e].indexOf(t),this.subjectTypeCollection[e].splice(r,1),0==this.subjectTypeCollection[e].length&&delete this.subjectTypeCollection[e];for(n in this.observerCollection[i])if(this.observerCollection[i][n])return;this.clearKeyByObserver(t),delete this.observerCollection[i]}},t.notify=function(t,e){if(void 0===e&&(e=null),null==this.callBackFunctionsArrayCollection[t])return void console.log("提示：目前没有任何观察者订阅此主题类型 "+t+"，此次消息发布无效");this.notifyingSubjectType=t;var i=this.callBackFunctionsArrayCollection[t].concat();for(var r in i){var n=i[r];null!=n&&(1==n.length?n.call(null,e):n.call(null))}this.notifyingSubjectType=null},t.notifyWeakly=function(t,e){if(void 0===e&&(e=null),null==this.callBackFunctionsArrayCollection[t])return void console.log("提示：目前没有任何观察者订阅此主题类型 "+t+"，此次消息发布无效");if(null!=this.notifyCollection[t])return console.log("提示：此主题类型 "+t+" 已在迭代发布中，为避免引发死循环，拦截并终止此次 notifyWeakly() 函数的调用"),this.notifyCollection[t]=null,delete this.notifyCollection[t],void(this.notifyingSubjectType=null);this.notifyCollection[t]=!0,this.notifyingSubjectType=t;var i=this.callBackFunctionsArrayCollection[t].concat();for(var r in i){var n=i[r];null!=n&&(1==n.length?n.call(null,e):n.call(null))}this.notifyCollection[t]=null,delete this.notifyCollection[t],this.notifyingSubjectType=null},t.getObserversFromSubjectType=function(t){var e;return null!=this.subjectTypeCollection[t]&&(e=this.subjectTypeCollection[t].concat()),e},t.hasObserverAndSubjectType=function(t,e){var i=this.getKeyByObserver(t);return null!=this.observerCollection[i]&&null!=this.observerCollection[i][e]},t.getSubjectTypesFromObserver=function(t){var e,i=this.getKeyByObserver(t);if("undefined"!=i){e=new Array;for(var r in this.observerCollection[i])e.push(r)}return e},t.getCurrentSubject=function(){return this.notifyingSubjectType},t.getKeyByObserver=function(t){var e=this.obsArray.indexOf(t);return-1==e?"undefined":this.keyArray[e]},t.createKeyByObserver=function(t){return this.obsArray.push(t),this.keyArray.push("key"+this.currentKey.toString()),("key"+this.currentKey++).toString()},t.clearKeyByObserver=function(t){var e=this.obsArray.indexOf(t);this.obsArray.splice(e,1),this.keyArray.splice(e,1)},t.observerCollection={},t.subjectTypeCollection={},t.callBackFunctionsArrayCollection={},t.notifyCollection={},t.obsArray=new Array,t.keyArray=new Array,t.currentKey=0,t}();egret.registerClass(ConcreteSubject,"ConcreteSubject");var ObserverBase=function(){function t(){}var e=(__define,t),i=e.prototype;return i.subscribe=function(t,e,i){void 0===i&&(i=this),ConcreteSubject.addObserver(this,t,e,i)},i.unsubscribe=function(t){void 0===t&&(t=null),ConcreteSubject.removeObserver(this,t)},t}();egret.registerClass(ObserverBase,"ObserverBase",["IObserver"]);